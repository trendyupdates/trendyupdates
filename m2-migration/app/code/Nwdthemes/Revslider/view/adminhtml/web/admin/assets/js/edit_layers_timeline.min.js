if(window.AudioContext=window.AudioContext||window.webkitAudioContext,window.AudioContext)var audioContext=new AudioContext,audiosource=audioContext.createBufferSource();else audiosource=null;var tpLayerTimelinesRev=new function(){function checkAvailableAutoTimes(){var e=jQuery(".mastertimer-timeline-selector-row.selected").length;jQuery(".autotiming-action").addClass("notclickable"),e>1?jQuery(".autotiming-action").removeClass("notclickable"):1==e&&(jQuery(".autotiming-action-3").removeClass("notclickable"),jQuery(".autotiming-action-4").removeClass("notclickable"),jQuery(".autotiming-action-5").removeClass("notclickable"),jQuery(".autotiming-action-6").removeClass("notclickable"))}function addIconFunction(){jQuery("#tp-addiconbutton, .addbutton-icon").click(function(){jQuery("#dialog_insert_icon").dialog({width:491,height:500,dialogClass:"tpdialogs",resize:function(){var e=jQuery("#dialog_insert_icon");e.css({width:e.parent().width()-30,height:e.parent().height()-60})},modal:!0,create:function(e,t){var a=jQuery(e.target),r=document.styleSheets,i=jQuery("#dialog_insert_icon");i.parent().css({padding:"0px",border:"none",borderRadius:"0px"}),i.parent().find(".ui-dialog-titlebar.ui-widget-header.ui-corner-all.ui-helper-clearfix.ui-draggable-handle").addClass("tp-slider-new-dialog-title"),r&&jQuery.each(r,function(e,t){var r=!1,i="";try{null!==t.cssRules&void 0!=t.cssRules&&jQuery.each(t.cssRules,function(e,t){t&&null!==t&&"null"!==t&&void 0!=t.selectorText&&jQuery.each(rs_icon_sets,function(e,a){if(t.selectorText.split(a).length>1&&t.cssText.split("content").length>1){var s=t.selectorText.split("::before")[0].split(":before")[0];void 0!=s&&void 0!=(s=s.split(".")[1])&&(0==r&&(r=!0,i='<ul class="tp-icon-preview-list lastaddediconset">'),i=i+'<li><i class="'+s+'"></i></li>')}})})}catch(e){}if(r){i+="</ul>",a.append(i);var s=a.find(".lastaddediconset").find("li").first().find("i");a.find(".lastaddediconset").prepend("<h3>"+s.css("fontFamily")+"</h3>").removeClass("lastaddediconset")}}),a.on("click","li",function(){jQuery("#dialog_addbutton").length>0&&"none"!==jQuery("#dialog_addbutton").closest(".tpdialogs").css("display")?jQuery(".addbutton-icon:visible").length>0?(jQuery(".addbutton-icon").html(jQuery(this).html()),jQuery("#dialog_insert_icon").dialog("close"),setExampleButtons()):(jQuery(".lasteditedlayertext").length>0?jQuery(".lasteditedlayertext").val(jQuery(".lasteditedlayertext").val()+jQuery(this).html()).blur().focus():jQuery("#layer_text").val(jQuery("#layer_text").val()+jQuery(this).html()).blur().focus(),jQuery("#dialog_insert_icon").dialog("close")):(jQuery(".lasteditedlayertext").length>0?jQuery(".lasteditedlayertext").val(jQuery(".lasteditedlayertext").val()+jQuery(this).html()).blur().focus():jQuery(".layer_text").val(jQuery("#layer_text").val()+jQuery(this).html()).blur().focus(),jQuery("#dialog_insert_icon").dialog("close")),u.updateLayerFromFields()})}})})}function reBlurFocus(e,t,a){jQuery("#rs-animation-tab-button").hasClass("selected")||jQuery("#rs-loopanimation-tab-button").hasClass("selected")||(t=Number(t)+e,t=Math.round(100*t)/100,a.val(t),jQuery(":focus").blur(),a.focus())}function basicClicksAndHovers(){jQuery(".rs-staticcustomstylechange").change(function(){t.rebuildLayerIdle(jQuery(".slide_layer.layer_selected"))}),jQuery(".rs-layer-settings-tabs li").click(function(){var e=jQuery(this);"#rs-animation-tab-button"!=e.attr("id")&&0==e.closest("#rs-animation-tab-button").length&&"#rs-loopanimation-tab-button"!=e.attr("id")&&0==e.closest("#rs-loopanimation-tab-button").length?(t.stopAllLayerAnimation(),setTimeout(function(){u.removeCurrentLayerRotatable(),u.makeCurrentLayerRotatable(),jQuery("#hide_layer_content_editor").click()},19)):jQuery(this).hasClass("selected")||(t.stopAllLayerAnimation(),"#rs-animation-tab-button"==e.attr("id")||0!=e.closest("#rs-animation-tab-button").length?(t.animateCurrentSelectedLayer(3),u.removeCurrentLayerRotatable(),jQuery("#hide_layer_content_editor").click()):(t.callCaptionLoops(),u.removeCurrentLayerRotatable(),jQuery("#hide_layer_content_editor").click()))}),jQuery("#divLayers").click(function(){t.stopAllLayerAnimation(),u.removeCurrentLayerRotatable(),setTimeout(function(){t.checkAnimationTab()&&t.animateCurrentSelectedLayer(4),t.checkLoopTab()&&t.callCaptionLoops()},19)}),jQuery("#layeranimation-playpause").click(function(){var e=jQuery(this);e.hasClass("inpause")?(e.removeClass("inpause"),t.checkAnimationTab()&&(t.stopAllLayerAnimation(),t.animateCurrentSelectedLayer(5),u.removeCurrentLayerRotatable())):(e.addClass("inpause"),t.stopAllLayerAnimation())}),jQuery("#loopanimation-playpause").click(function(){var e=jQuery(this);e.hasClass("inpause")?(e.removeClass("inpause"),t.checkLoopTab()&&(t.stopAllLayerAnimation(),t.callCaptionLoops(),u.removeCurrentLayerRotatable())):(e.addClass("inpause"),t.stopAllLayerAnimation())}),jQuery("#rs-style-tab-button").click(function(){setTimeout(function(){jQuery(".slide_layer").each(function(){t.rebuildLayerIdle(jQuery(this));var e=jQuery(this).find(".innerslide_layer").first();if(e.length>0&&void 0!=e.data("hoveranim")){var a=e.data("hoveranim");a.seek(a.endTime())}})},19)}),jQuery("#toggle-idle-hover").click(function(){setTimeout(function(){t.rebuildLayerIdle(jQuery(".slide_layer.layer_selected"))},19)}),jQuery("#style_form_wrapper").on("colorchanged",function(){t.rebuildLayerIdle(jQuery(".slide_layer.layer_selected"))})}function preparePeviewAnimations(){jQuery(".rs-inoutanimationfield").on("change",function(){t.checkAnimationTab()&&(t.stopAllLayerAnimation(),setTimeout(function(){t.animateCurrentSelectedLayer(50)},19))})}function prepareLoopAnimations(){jQuery(".rs-loopanimationfield").on("change",function(){t.checkLoopTab()&&(t.stopAllLayerAnimation(),setTimeout(function(){t.callCaptionLoops()},19))})}function theLayerInAnimation(e){var t=e.closest(".slide_layer"),a=u.getSerialFromID(t.attr("id")),r=UniteAdminRev.duplicateObjectDeep(u.getLayer(a));0==t.children(".tp-mask-wrap").length&&t.wrapInner('<div style="width:100%;height:100%;position:relative;" class="tp-mask-wrap"></div>');var i=t.find(".tp-mask-wrap"),s=(r.animation,t.hasClass("slide_layer_type_column")?t.find(".column_background").first():void 0),o=r.frames.frame_0.speed/1e3,n=r.frames.frame_0.easing,l=r.frames.frame_0.splitdelay/100,d=r.frames.frame_0.split,c=r.frames.frame_999.split,m=e,p=new Object,f=new Object;if(p.transx=0,p.transy=0,p.transz=0,p.rotatex=0,p.rotatey=0,p.rotatez=0,p.scalex=1,p.scaley=1,p.skewx=0,p.skewy=0,p.opac=0,p.tper=parseFloat(r.deformation.pers),p.origin="center,center",f.transx=0,f.transy=0,f.transz=parseFloat(r.deformation.z),f.rotatex=parseFloat(r.deformation.xrotate),f.rotatey=parseFloat(r.deformation.yrotate),f.rotatez=parseFloat(r["2d_rotation"]),f.scalex=parseFloat(r.deformation.scalex),f.scaley=parseFloat(r.deformation.scaley),f.skewx=parseFloat(r.deformation.skewx),f.skewy=parseFloat(r.deformation.skewy),f.opac=parseFloat(r.deformation.opacity),f.tper=parseFloat(r.deformation.pers),p["-webkit-filter"]="",p.filter="",f["-webkit-filter"]="",f.filter="",void 0!==r.deformation.blurfilter&&parseInt(r.deformation.blurfilter,0)>0||void 0!==r.blurfilter_start&&parseInt(r.blurfilter_start,0)>0){var y="blur("+parseInt(r.deformation.blurfilter,0)+"px)",h="inherit"===r.blurfilter_start?y:"blur("+parseInt(r.blurfilter_start,0)+"px)";p["-webkit-filter"]=h,p.filter=h,f["-webkit-filter"]=y,f.filter=y}if(void 0!==r.deformation.grayscalefilter&&parseInt(r.deformation.grayscalefilter,0)>0||void 0!==r.grayscalefilter_start&&parseInt(r.grayscalefilter_start,0)>0){var g="grayscale("+parseInt(r.deformation.grayscalefilter,0)+"%)",v="inherit"===r.grayscalefilter_start?g:"grayscale("+parseInt(r.grayscalefilter_start,0)+"%)";p["-webkit-filter"]=""===p["-webkit-filter"]?v:p["-webkit-filter"]+" "+v,p.filter=""===p.filter?v:p.filter+" "+v,f["-webkit-filter"]=""===f["-webkit-filter"]?g:f["-webkit-filter"]+" "+g,f.filter=""===f.filter?g:f.filter+" "+g}var _=r.layer_2d_origin_x+"%"+" "+(r.layer_2d_origin_y+"%");if(void 0!=e.data("mySplitText")&&("none"!=d||"none"!=c))try{e.data("mySplitText").revert()}catch(e){}switch("chars"==d||"words"==d||"lines"==d||"chars"==c||"words"==c||"lines"==c?e.find("a").length>0?e.data("mySplitText",new SplitText(e.find("a"),{type:"lines,words,chars"})):e.data("mySplitText",new SplitText(e,{type:"lines,words,chars"})):e.data("mySplitText","none"),d){case"chars":m=e.data("mySplitText").chars;break;case"words":m=e.data("mySplitText").words;break;case"lines":m=e.data("mySplitText").lines}m.length;punchgs.TweenLite.killTweensOf(e,!1),punchgs.TweenLite.killTweensOf(m,!1),punchgs.TweenLite.set(i,{clearProps:"transform"}),punchgs.TweenLite.set(e,{clearProps:"transform"}),punchgs.TweenLite.set(m,{clearProps:"transform"});var b=new punchgs.TimelineLite,w=new punchgs.TimelineLite;if(m!=e&&b.add(punchgs.TweenLite.set(e,{scaleX:f.scalex,scaleY:f.scaley,rotationX:f.rotatex,rotationY:f.rotatey,rotationZ:f.rotatez,x:f.transx,y:f.transy,z:f.transz+1,skewX:f.skewx,skewY:f.skewy,transformPerspective:f.tper,transformOrigin:_,autoAlpha:f.opac,overwrite:"all"})),e.data("timer")&&clearTimeout(e.data("timer")),e.data("timera")&&clearTimeout(e.data("timera")),p.transx=checkAnimValue(r.x_start,f.transx,e,"horizontal"),p.transy=checkAnimValue(r.y_start,f.transy,e,"vertical"),p.transz=checkAnimValue(r.z_start,f.transz,e),p.rotatex=checkAnimValue(r.x_rotate_start,f.rotatex,e),p.rotatey=checkAnimValue(r.y_rotate_start,f.rotatey,e),p.rotatez=checkAnimValue(r.z_rotate_start,f.rotatez,e),p.scalex=checkAnimValue(r.scale_x_start,f.scalex,e),p.scaley=checkAnimValue(r.scale_y_start,f.scaley,e),p.skewx=checkAnimValue(r.skew_x_start,f.skewx,e),p.skewy=checkAnimValue(r.skew_y_start,f.skewy,e),p.opac=checkAnimValue(r.opacity_start,f.opac,e),p.tper=r.deformation.pers,b.add(w.set(m,{clearProps:"transform"}),0),b.add(w.staggerFromTo(m,o,{scaleX:p.scalex,scaleY:p.scaley,rotationX:p.rotatex,rotationY:p.rotatey,rotationZ:p.rotatez,x:p.transx,y:p.transy,z:p.transz,skewX:p.skewx,skewY:p.skewy,transformPerspective:p.tper,transformOrigin:_,autoAlpha:p.opac,"-webkit-filter":p["-webkit-filter"],filter:p.filter},{scaleX:f.scalex,scaleY:f.scaley,rotationX:f.rotatex,rotationY:f.rotatey,rotationZ:f.rotatez,x:f.transx,y:f.transy,z:f.transz,skewX:f.skewx,skewY:Number(f.skewy),transformPerspective:f.tper,transformOrigin:_,ease:n,autoAlpha:f.opac,overwrite:"all",force3D:"auto","-webkit-filter":f["-webkit-filter"],filter:f.filter},l)),void 0!=s&&b.add(punchgs.TweenLite.fromTo(s,o,{scaleX:p.scalex,scaleY:p.scaley,rotationX:p.rotatex,rotationY:p.rotatey,rotationZ:p.rotatez,x:p.transx,y:p.transy,z:p.transz,skewX:p.skewx,skewY:p.skewy,transformPerspective:p.tper,transformOrigin:_,autoAlpha:p.opac},{scaleX:f.scalex,scaleY:f.scaley,rotationX:f.rotatex,rotationY:f.rotatey,rotationZ:f.rotatez,x:f.transx,y:f.transy,z:f.transz,skewX:f.skewx,skewY:Number(f.skewy),transformPerspective:f.tper,transformOrigin:_,ease:n,autoAlpha:f.opac,overwrite:"all",force3D:"auto"}),0),r.mask_start||b.add(punchgs.TweenLite.set(i,{overflow:"visible"}),0),r.mask_start){var k=new Object;k.x=checkAnimValue(r.mask_x_start,r.mask_x_start,e,"horizontal"),k.y=checkAnimValue(r.mask_y_start,r.mask_y_start,e,"vertical"),b.add(punchgs.TweenLite.fromTo(i,o,{overflow:"hidden",x:k.x,y:k.y},{x:0,y:0,ease:n}),0)}return r.mask_start||r.mask_end?i.addClass("tp-showmask"):i.removeClass("tp-showmask"),e.data("startanimobj",p),b.add(punchgs.TweenLite.fromTo(jQuery("#startanim_wrapper"),w.totalDuration(),{autoAlpha:1,width:0},{width:67,ease:n}),0),m!=e&&b.add(punchgs.TweenLite.fromTo(e.parent(),.2,{autoAlpha:0},{autoAlpha:1}),0),b}function theLayerOutAnimation(e){var t=e.closest(".slide_layer"),a=u.getSerialFromID(t.attr("id")),r=UniteAdminRev.duplicateObjectDeep(u.getLayer(a)),i=t.find(".tp-mask-wrap"),s=t.hasClass("slide_layer_type_column")?t.find(".column_background").first():void 0,o=r.frames.frame_999.animation,n=r.frames.frame_999.speed/1e3,l=r.frames.frame_999.easing,d=r.frames.frame_999.splitdelay/100,c=r.frames.frame_999.split,m=e;if(theanim=new Object,theresult=new Object,originx=r.layer_2d_origin_x+"%",originy=r.layer_2d_origin_y+"%",origin=originx+" "+originy,l="nothing"==l?r.frames.frame_999.easing:l,theanim.transx=0,theanim.transy=0,theanim.transz=0,theanim.rotatex=0,theanim.rotatey=0,theanim.rotatez=0,theanim.scalex=1,theanim.scaley=1,theanim.skewx=0,theanim.skewy=0,theanim.opac=0,theanim.tper=parseFloat(r.deformation.pers),theresult.transx=0,theresult.transy=0,theresult.transz=parseFloat(r.deformation.z),theresult.rotatex=parseFloat(r.deformation.xrotate),theresult.rotatey=parseFloat(r.deformation.yrotate),theresult.rotatez=parseFloat(r["2d_rotation"]),theresult.scalex=parseFloat(r.deformation.scalex),theresult.scaley=parseFloat(r.deformation.scaley),theresult.skewx=parseFloat(r.deformation.skewx),theresult.skewy=parseFloat(r.deformation.skewy),theresult.opac=parseFloat(r.deformation.opacity),theresult.tper=parseFloat(r.deformation.pers),theanim["-webkit-filter"]="",theanim.filter="",theresult["-webkit-filter"]="",theresult.filter="",void 0!==r.deformation.blurfilter&&parseInt(r.deformation.blurfilter,0)>0||void 0!==r.blurfilter_start&&parseInt(r.blurfilter_start,0)>0){var p="blur("+parseInt(r.deformation.blurfilter,0)+"px)",f="inherit"===r.blurfilter_end?p:"blur("+parseInt(r.blurfilter_end,0)+"px)";theanim["-webkit-filter"]=f,theanim.filter=f,theresult["-webkit-filter"]=p,theresult.filter=p}if(void 0!==r.deformation.grayscalefilter&&parseInt(r.deformation.grayscalefilter,0)>0||void 0!==r.grayscalefilter_end&&parseInt(r.grayscalefilter_end,0)>0){var y="grayscale("+parseInt(r.deformation.grayscalefilter,0)+"%)",h="inherit"===r.grayscalefilter_end?y:"grayscale("+parseInt(r.grayscalefilter_end,0)+"%)";theanim["-webkit-filter"]=""===theanim["-webkit-filter"]?h:theanim["-webkit-filter"]+" "+h,theanim.filter=""===theanim.filter?h:theanim.filter+" "+h,theresult["-webkit-filter"]=""===theresult["-webkit-filter"]?y:theresult["-webkit-filter"]+" "+y,theresult.filter=""===theresult.filter?y:theresult.filter+" "+y}switch(c){case"chars":m=e.data("mySplitText").chars;break;case"words":m=e.data("mySplitText").words;break;case"lines":m=e.data("mySplitText").lines}m.length;var g=new punchgs.TimelineLite,v=new punchgs.TimelineLite;if(null==o&&(o="auto"),r.mask_end&&("auto"!==o||r.mask_start)||g.add(punchgs.TweenLite.set(i,{overflow:"visible"})),"auto"===o)theanim=e.data("startanimobj");else{r.mask_end||"auto"===o&&r.mask_start;theanim.transx=checkAnimValue(r.x_end,theresult.transx,e,"horizontal"),theanim.transy=checkAnimValue(r.y_end,theresult.transy,e,"vertical"),theanim.transz=checkAnimValue(r.z_end,theresult.transz,e),theanim.rotatex=checkAnimValue(r.x_rotate_end,theresult.rotatex,e),theanim.rotatey=checkAnimValue(r.y_rotate_end,theresult.rotatey,e),theanim.rotatez=checkAnimValue(r.z_rotate_end,theresult.rotatez,e),theanim.scalex=checkAnimValue(r.scale_x_end,theresult.scalex,e),theanim.scaley=checkAnimValue(r.scale_y_end,theresult.scaley,e),theanim.skewx=checkAnimValue(r.skew_x_end,theresult.skewx,e),theanim.skewy=checkAnimValue(r.skew_y_end,theresult.skewy,e),theanim.opac=checkAnimValue(r.opacity_end,theresult.opac,e),theanim.tper=r.deformation.pers}if(g.add(v.staggerTo(m,.001,{"-webkit-filter":theresult["-webkit-filter"],filter:theresult.filter},d-.001)),g.add(v.staggerTo(m,n,{scaleX:theanim.scalex,scaleY:theanim.scaley,rotationX:theanim.rotatex,rotationY:theanim.rotatey,rotationZ:theanim.rotatez,x:theanim.transx,y:theanim.transy,z:theanim.transz+1,skewX:theanim.skewx,skewY:theanim.skewy,opacity:theanim.opac,transformPerspective:theanim.tper,transformOrigin:origin,ease:l,"-webkit-filter":theanim["-webkit-filter"],filter:theanim.filter},d)),void 0!=s&&g.add(punchgs.TweenLite.to(s,n,{scaleX:theanim.scalex,scaleY:theanim.scaley,rotationX:theanim.rotatex,rotationY:theanim.rotatey,rotationZ:theanim.rotatez,x:theanim.transx,y:theanim.transy,z:theanim.transz+1,skewX:theanim.skewx,skewY:theanim.skewy,opacity:theanim.opac,transformPerspective:theanim.tper,transformOrigin:origin,ease:l},d),0),r.mask_end)(_=new Object).x=checkAnimValue(r.mask_x_end,r.mask_x_end,e),_.y=checkAnimValue(r.mask_y_end,r.mask_y_end,e),g.add(punchgs.TweenLite.to(i,n,{x:_.x,y:_.y,ease:l,overflow:"hidden"},d),0);else if("auto"===o&&r.mask_start){var _=new Object;_.x=checkAnimValue(r.mask_x_start,r.mask_x_start,e),_.y=checkAnimValue(r.mask_y_start,r.mask_y_start,e),g.add(punchgs.TweenLite.to(i,n,{x:_.x,y:_.y,ease:l},d),0)}return g.add(punchgs.TweenLite.fromTo(jQuery("#endanim_timerunnerbox"),v.totalDuration(),{x:0},{x:-67,ease:l}),0),g.add(punchgs.TweenLite.fromTo(jQuery("#endanim_timerunner"),v.totalDuration(),{x:0},{x:-67,ease:l}),0),m!=e&&g.add(punchgs.TweenLite.fromTo(e.parent(),.2,{autoAlpha:1},{autoAlpha:0}),v.totalDuration()-.2),g}function createGlobalTimeline(e,a){e&&t.stopAllLayerAnimation();var r=jQuery("#mastertimer-position");void 0!=r.data("tl")&&r.data("tl").kill();var i=new punchgs.TimelineLite;i.pause(),jQuery(" .slide_layer .innerslide_layer").each(function(){var e=jQuery(this);e.data("inanim",theLayerInAnimation(e)),e.data("outanim",theLayerOutAnimation(e));var t=u.getSerialFromID(e.closest(".slide_layer").attr("id"));params=u.getLayer(t),i.add(e.data("inanim"),params.frames.frame_0.time/1e3);var a=params.frames.frame_999.endspeed;void 0==a&&(a=params.frames.frame_0.speed),i.add(e.data("outanim"),params.frames.frame_999.time/1e3)}),r.data("tl",i)}function loadMusicTimeLine(e,t){if(null===audioContext||!AudioContext)return!1;var a=new XMLHttpRequest,r=e.references.sorttable.timeline,i=null;a.open("GET",t,!0),a.responseType="arraybuffer",a.onreadystatechange=function(t){4==a.readyState&&(200==a.status?audioContext.decodeAudioData(a.response,function(t){i=t,r.data("audiobuffer",t),displayAudioBuffer(e,t)},onDecodeError):console.log("error during the load.Wrong url or cross origin issue"))},a.send()}function onDecodeError(){alert("error while decoding your Audio file.")}function getStartSec(e){return void 0==e?-1:""==e?-1:" "==e?-1:jQuery.isNumeric(e)?e:e.split(":").length>1?60*parseInt(e.split(":")[0],0)+parseInt(e.split(":")[1],0):e}function displayAudioBuffer(e,a){try{var r=e.references.sorttable.timeline,i=a.getChannelData(0),s=(r.find(".timeline_full"),100*a.duration),o=(e.video_data.start_at,getStartSec(e.video_data.start_at)),n=getStartSec(e.video_data.end_at);o=-1==o?0:o,n=-1==n?999999999:n,o/=60,n=(n/=60)>a.duration?a.duration:n,o*=a.sampleRate,s=((n*=a.sampleRate)-o)/a.sampleRate*100,r.find("canvas").remove();var l=document.createElement("canvas");l.width=t.mainMaxTimeLeft,l.height=19,r.append('<div class="timeline_audio"></div>'),r.find(".timeline_audio").append(l);var d=r.find("canvas");punchgs.TweenLite.set(d,{zIndex:2,top:3,left:0,position:"absolute"});var u=l.getContext("2d");i.length;u.save(),u.fillStyle="transparent",u.fillRect(0,0,s,19),u.strokeStyle="#333",u.translate(0,9.5),u.globalAlpha=.5;for(var c=0,m=n-o,p=0;p<n-o;p+=200){var f=Math.floor(s*p/m),y=19*i[o+p];u.beginPath(),u.moveTo(f,0),u.lineTo(f+1,y),u.stroke(),c++}if("none"!=e.video_data.videoloop)for(var h=u.getImageData(0,0,s,19),g=t.mainMaxTimeLeft/s,p=0;p<g;p++)u.putImageData(h,p*s,0);u.restore(),audio=jQuery(e.references.sorttable.timeline[0]).find(".timeline_audio"),void 0!==audio&&audio.length>0&&punchgs.TweenLite.set(audio,{left:15+e.frames.frame_0.time/10,width:(e.frames.frame_999.time-e.frames.frame_0.time+e.frames.frame_999.split_extratime+e.frames.frame_999.speed)/10})}catch(n){console.log("Drawing of Audio Map failed !")}}var t=this,u=new Object,sortMode="time",__ctime,__ctimeb,__ctimei,__coffset=0;t.timelinetype="absolute",t.mainMaxTimeLeft=0,t.layout="desktop",t.timercorrectur=0,t.init=function(){u=UniteLayersRev,g_rebuildTimer=999,g_slideTime=u.getMaintime(),g_keyTimer=0,t.mainMaxTimeLeft=jQuery("#mastertimer-maxtime").position().left,initSlideDuration(),initSortbox(),initMasterTimer(),preparePeviewAnimations(),prepareLoopAnimations(),showHideTimeines(),basicClicksAndHovers(),addIconFunction(),t.addToSortbox(),jQuery("#slide_transition, #slot_amount, #transition_rotation").change(function(){setFakeAnim()});var e;jQuery(window).resize(function(){clearTimeout(e),e=setTimeout(function(){t.resetSlideAnimations(!1)},250)});var a=!1;jQuery("#thelayer-editor-wrapper").hover(function(){a=!0},function(){a=!1}),jQuery("#fake-select-title-wrapper").click(function(){jQuery("#slide-animation-settings-content-tab").click(),jQuery("html,body").animate({scrollTop:-100+jQuery("#slide-animation-settings-content-tab").offset().top},200)}),jQuery(".slide-trans-menu-element").each(function(){var e=jQuery(this);e.text(e.text().toLowerCase()),e.click(function(){var e=jQuery(this);jQuery(".slide-trans-menu-element").removeClass("selected"),e.addClass("selected"),jQuery(".slide-trans-checkelement").hide(),jQuery("."+e.data("reference")).show()})}),jQuery(".slide-trans-menu-element").first().click();"undefined"!=typeof choosen_slide_transition&&function(){var e=jQuery(".slide-trans-cur-ul");for(var t in choosen_slide_transition)if(choosen_slide_transition.hasOwnProperty(t)){var a="";a+=' data-duration="'+transition_settings.duration[t]+'"',a+=' data-ease_in="'+transition_settings.ease_in[t]+'"',a+=' data-ease_out="'+transition_settings.ease_out[t]+'"',a+=' data-rotation="'+transition_settings.rotation[t]+'"',a+=' data-slot="'+transition_settings.slot[t]+'"',e.append('<li value="'+choosen_slide_transition[t]+'"'+a+' class="justaddedtrans draggable-trans-element">'+jQuery('input[name="slide_transition[]"][value="'+choosen_slide_transition[t]+'"]').parent().text()+'<i class="remove-trans-from-list eg-icon-cancel"></i></li>'),jQuery(".justaddedtrans").data("animval",choosen_slide_transition[t]),jQuery(".justaddedtrans").removeClass("justaddedtrans")}setFakeAnim()}();var r=new punchgs.TimelineLite,i=jQuery("#form_slide_params").offset();jQuery("body").on("click",".remove-trans-from-list",function(){var e=jQuery(this).parent(),t=e.data("animval"),a=!1;return jQuery(".slide-trans-checkelement").each(function(){var e=jQuery(this).find("input");e.val()==t&&(e.removeAttr("checked"),a=!0)}),a&&jQuery(".remove-trans-from-list").length>1?(e.remove(),jQuery(".slide-trans-cur-ul li:first-child").click()):alert(rev_lang.cant_remove_last_transition),!1}),jQuery(".slide-trans-checkelement").on("mouseover",function(e){var t=jQuery(this).find('input[name="slide_transition[]"]'),a=jQuery(".slide-trans-example-inner .slotholder"),s=jQuery(".slide-trans-example-inner .oldslotholder"),o=jQuery(".slide-trans-example");a.find(".slot").each(function(){jQuery(this).remove()}),s.find(".slot").each(function(){jQuery(this).remove()}),r.kill(),punchgs.TweenLite.set(a,{clearProps:"transform"}),punchgs.TweenLite.set(s,{clearProps:"transform"}),punchgs.TweenLite.set(a.find(".defaultimg"),{clearProps:"transform",autoAlpha:1}),punchgs.TweenLite.set(s.find(".defaultimg"),{clearProps:"transform",autoAlpha:1}),(r=slideAnimation(a,s,t.val(),r,!0)).pause(.001),punchgs.TweenLite.to(o,.2,{top:e.pageY-i.top,overwrite:"all",autoAlpha:1,ease:punchgs.Power3.easeInOut,onComplete:function(){setTimeout(function(){r.play()},100)}})}),jQuery(".slide-trans-checkelement").on("mouseleave",function(){clearTimeout(void 0);jQuery(this).find('input[name="slide_transition[]"]'),jQuery(".slide-trans-example-inner .slotholder"),jQuery(".slide-trans-example-inner .oldslotholder");punchgs.TweenLite.to(jQuery(".slide-trans-example"),.2,{autoAlpha:0,delay:.2})}),jQuery('input[name="slide_transition[]"]').on("change",function(){if(jQuery(this).is(":checked")){var e="";e+=' data-duration="default"',e+=' data-ease_in="default"',e+=' data-ease_out="default"',e+=' data-rotation="0"',e+=' data-slot="default"',jQuery(".slide-trans-cur-ul").append('<li value="'+jQuery(this).val()+'"'+e+' class="justaddedtrans draggable-trans-element">'+jQuery(this).parent().text()+'<i class="remove-trans-from-list eg-icon-cancel"></i></li>'),jQuery(".justaddedtrans").data("animval",jQuery(this).val()),jQuery(".justaddedtrans").removeClass("justaddedtrans")}else jQuery(".remove-trans-from-list").length>1?(jQuery(".slide-trans-cur-ul").find("li:data[value="+jQuery(this).val()+"]").remove(),jQuery(".slide-trans-cur-ul li:first-child").click()):(jQuery(this).attr("checked",!0),alert(rev_lang.cant_remove_last_transition));setFakeAnim()}),jQuery("body").on("click",".slide-trans-cur-ul li",function(){jQuery(".slide-trans-cur-ul li").each(function(){jQuery(this).removeClass("selected")}),jQuery(this).addClass("selected"),jQuery('input[name="slot_amount"]').val(jQuery(this).data("slot")),jQuery('input[name="transition_rotation"]').val(jQuery(this).data("rotation")),jQuery('input[name="transition_duration"]').val(jQuery(this).data("duration")),jQuery('select[name="transition_ease_in"] option[value="'+jQuery(this).data("ease_in")+'"]').attr("selected",!0),jQuery('select[name="transition_ease_out"] option[value="'+jQuery(this).data("ease_out")+'"]').attr("selected",!0)}),jQuery(".slide-trans-cur-ul li:first-child").click(),jQuery('input[name="slot_amount"]').change(function(){jQuery(".slide-trans-cur-ul li.selected").data("slot",jQuery(this).val())}),jQuery('input[name="transition_rotation"]').change(function(){jQuery(".slide-trans-cur-ul li.selected").data("rotation",jQuery(this).val())}),jQuery('input[name="transition_duration"]').change(function(){jQuery(".slide-trans-cur-ul li.selected").data("duration",jQuery(this).val()),setSlideTransitionTimerBar()}),jQuery('select[name="transition_ease_in"]').change(function(){jQuery(".slide-trans-cur-ul li.selected").data("ease_in",jQuery(this).val())}),jQuery('select[name="transition_ease_out"]').change(function(){jQuery(".slide-trans-cur-ul li.selected").data("ease_out",jQuery(this).val())}),jQuery(".slide-trans-cur-ul").sortable({containment:".slide-trans-cur-selected",stop:function(){setTimeout(function(){setFakeAnim()},200)}}),jQuery("#abs_rel_timeline").on("change",function(){t.timelinetype=jQuery(this).val(),t.updateAllLayerTimeline()}),jQuery(document).on("keydown",function(e){var t=jQuery("input:focus").length>0;if(e.ctrlKey||e.metaKey||e.shiftKey)switch(String.fromCharCode(e.which).toLowerCase()){case"s":e.shiftKey||(e.preventDefault(),jQuery("#button_save_static_slide-tb").length>0?jQuery("#button_save_static_slide-tb").click():jQuery("#button_save_slide-tb").click());break;case"z":!e.metaKey&&!e.ctrlKey||t||(e.preventDefault(),e.shiftKey?u.oneStepRedo():u.oneStepUndo());break;case"y":!e.ctrlKey&&!e.metaKey||t||(e.preventDefault(),u.oneStepRedo())}}),jQuery("body").on("keydown keyup",function(e){if(jQuery("#layer_text").is(":focus"))return!0;if(jQuery("#layer_text_toggle").is(":focus"))return!0;var t=e.keyCode?e.keyCode:e.which,r=void 0!=jQuery(document.activeElement).data("steps")?parseFloat(jQuery(document.activeElement).data("steps")):1;Number(parseInt(jQuery("#layer_left").val(),0)),Number(parseInt(jQuery("#layer_top").val(),0));switch(e.shiftKey&&(r*=10),jQuery(document.activeElement).get(0).tagName.toLowerCase()){case"INPUT":case"input":var i=parseFloat(jQuery(document.activeElement).val());if(void 0!=jQuery(document.activeElement).data("suffix")&&!jQuery(document.activeElement).data("suffix").match(/auto/g)&&(i=Number(i),jQuery.isNumeric(i)))switch(t){case 38:return"keyup"==e.type&&reBlurFocus(r,i,jQuery(document.activeElement)),!1;case 40:return"keyup"==e.type&&reBlurFocus(-r,i,jQuery(document.activeElement)),!1}break;case"textarea":return!0;default:switch(t){case 8:case 46:e.preventDefault(),"keydown"==e.type&&(jQuery("#button_delete_layer").click(),window.deletecalled=!0)}if(a)switch(t){case 40:return"keyup"==e.type?setTimeout(function(){u.updateMovedLayers()},50):u.adjustSelectedLayerPositions("top",r),!1;case 38:return"keyup"==e.type?setTimeout(function(){u.updateMovedLayers()},50):u.adjustSelectedLayerPositions("top",-1*r),!1;case 37:return"keyup"==e.type?setTimeout(function(){u.updateMovedLayers()},50):u.adjustSelectedLayerPositions("left",-1*r),!1;case 39:return"keyup"==e.type?setTimeout(function(){u.updateMovedLayers()},50):u.adjustSelectedLayerPositions("left",r),!1}}}),t.deepSelection(),jQuery(".input-deepselects").each(function(){var e=jQuery(this);e.wrap('<span class="inp-deep-wrapper"></span>'),e.parent().append('<div class="inp-deep-list"></div>');var t=e.parent().find(".inp-deep-list"),a='<span class="inp-deep-listitems">',r=e.data("reverse"),i=e.data("deepwidth"),s=void 0!=e.data("selects")?e.data("selects").split("||"):"",o=void 0!=e.data("svalues")?e.data("svalues").split("||"):"",n=void 0!=e.data("icons")?e.data("icons").split("||"):"",l=e.attr("id");void 0!==i&&punchgs.TweenLite.set(t,{minWidth:i+"px"}),"on"==r&&(a=a+"<span class='reverse_input_wrapper'><span class='reverse_input_text'>Direction Auto Reverse</span><input class='reverse_input_check tp-moderncheckbox' name='"+l+"_reverse' id='"+l+"_reverse' type='checkbox'></span>"),void 0!==s&&""!=s&&jQuery.each(s,function(e){var t=o[e]||"",r=s[e]||"",e=n[e]||"";a=a+"<span class='inp-deep-prebutton' data-val='"+t+"'><i class='eg-icon-"+e+"'></i>"+r+"</span>"}),a+="</span>",t.append(a),"on"==r&&RevSliderSettings.onoffStatus(jQuery('input[name="'+l+'_reverse"]'))}),jQuery("body").on("click",".inp-deep-prebutton",function(){var e=jQuery(this),t=e.closest(".inp-deep-wrapper").find("input");t.val(e.data("val")),t.blur(),t.focus(),t.trigger("change")}),jQuery("body").on("click",".input-deepselects",function(){jQuery(this).closest(".inp-deep-wrapper").find(".inp-deep-list").addClass("visible"),jQuery(this).closest(".inp-deep-wrapper").addClass("selected-deep-wrapper")}),jQuery(".inp-deep-wrapper").on("mouseleave",function(){jQuery(this).find(".inp-deep-list").removeClass("visible"),jQuery(this).removeClass("selected-deep-wrapper")}),jQuery('input[name="masking-start"]').on("change",function(){"checked"===jQuery(this).attr("checked")?jQuery(".mask-start-settings").show():jQuery(".mask-start-settings").hide()}),jQuery('input[name="masking-end"]').on("change",function(){"checked"===jQuery(this).attr("checked")?jQuery(".mask-end-settings").show():jQuery(".mask-end-settings").hide()}),jQuery("body").on("click",".show_timeline_helper",function(){var e=jQuery(this),t=e.closest("li"),a=e.closest(".timeline_frame"),r=jQuery("#timline-manual-dialog"),i=a.position().left,s=(t.width(),a.data("frameindex")),o=u.getLayerByUniqueId(t.data("uniqueid")),n=o.frames["frame_"+s].time,l=o.frames["frame_"+s].speed;r.appendTo(t),i=(i=999===s?i-r.width()+a.width()-20:0===s?i:i-r.width()/2+10)<20?20:i,r.css({left:i}),jQuery("#clayer_start_time").val(n),jQuery("#clayer_start_speed").val(l),r.data("frameindex",s),r.data("uniqueid",o.unique_id),r.show()}),jQuery("body").on("click","#timline-manual-closer",function(){var e=jQuery("#timline-manual-dialog");e.hide(),e.appendTo(jQuery("#thelayer-editor-wrapper"))}),jQuery("body").on("click","#timline-manual-apply",function(){jQuery(this);var e=jQuery("#timline-manual-dialog"),a=e.data("frameindex"),r=document.getElementById("tl_"+e.data("uniqueid")+"_frame_"+a),i=u.getLayerByUniqueId(e.data("uniqueid")),s={frames:{}};t.recordFrameStatus(r),s.frames["frame_"+a]={},s.frames["frame_"+a].time=jQuery("#clayer_start_time").val(),s.frames["frame_"+a].speed=jQuery("#clayer_start_speed").val(),e.hide(),e.appendTo(jQuery("#thelayer-editor-wrapper")),u.updateLayer(i.serial,s),t.updateLayerTimeline(i),t.updateTLFrame(r,"trigger"),t.updateAllSelectedLayerTimeline(r),t.updateAllLayerTimeline()}),jQuery("body").on("click","#timing-all-onoff-checkbox",function(){"checked"!=jQuery(this).attr("checked")||jQuery(".mastertimer-timeline-selector-row.selected").length==jQuery(".layer-on-timeline-selector").length?(jQuery(".mastertimer-timeline-selector-row.selected").removeClass("selected"),jQuery(".layer-on-timeline-selector").removeAttr("checked")):(jQuery(".layer-on-timeline-selector").attr("checked","checked"),jQuery(".sortable_elements .mastertimer-timeline-selector-row").addClass("selected")),t.checkMultipleSelectedItems(),checkAvailableAutoTimes()}),jQuery("body").on("click",".list-of-layer-links",function(){jQuery(this).toggleClass("showmenow")}),jQuery("body").on("click",".timing-layer-link-type-element",function(){var e=jQuery(this).data("linktype");u.selectedLayers=[],jQuery(".layer-on-timeline-selector").each(function(){var t=jQuery(this),a=t.closest(".mastertimer-layer").data("uniqueid"),r=u.getLayerByUniqueId(a);r.groupLink==e?(t.attr("checked","checked"),u.selectedLayers.push(a),r.references.htmlLayer.addClass("multiplelayerselected")):(t.removeAttr("checked","checked"),r.references.htmlLayer.removeClass("multiplelayerselected"))})}),jQuery("body").on("change",".layer-on-timeline-selector",function(){t.checkMultipleSelectedItems()})},t.deepSelection=function(e){jQuery(".input-deepselects").each(function(){var e=jQuery(this);if(!e.hasClass("deepselection_ready")){e.addClass("deepselection_ready"),e.wrap('<span class="inp-deep-wrapper"></span>'),e.parent().append('<span class="inp-deep-list"></span>');var t=e.parent().find(".inp-deep-list"),a='<span class="inp-deep-listitems">',r=e.data("reverse"),i=e.data("deepwidth"),s=void 0!=e.data("selects")?e.data("selects").split("||"):"",o=void 0!=e.data("svalues")?e.data("svalues").split("||"):"",n=void 0!=e.data("icons")?e.data("icons").split("||"):"",l=e.attr("id");void 0!==i&&punchgs.TweenLite.set(t,{minWidth:i+"px"}),"on"==r&&(a=a+"<span class='reverse_input_wrapper'><span class='reverse_input_text'>Direction Auto Reverse</span><input class='reverse_input_check tp-moderncheckbox' name='"+l+"_reverse' id='"+l+"_reverse' type='checkbox'></span>"),void 0!==s&&""!=s&&jQuery.each(s,function(e){var t=o[e]||"",r=s[e]||"",e=n[e]||"";a=a+"<span class='inp-deep-prebutton' data-val='"+t+"'><i class='eg-icon-"+e+"'></i>"+r+"</span>"}),a+="</span>",t.append(a),"on"==r&&RevSliderSettings.onoffStatus(jQuery('input[name="'+l+'_reverse"]')),e.parent().on("mouseleave",function(){jQuery(this).find(".inp-deep-list").removeClass("visible"),jQuery(this).removeClass("selected-deep-wrapper")})}}),!0!==e&&(jQuery("body").on("click",".inp-deep-prebutton",function(){var e=jQuery(this),t=e.closest(".inp-deep-wrapper").find("input");t.val(e.data("val")),t.blur(),t.focus(),t.trigger("change")}),jQuery("body").on("click",".input-deepselects",function(){jQuery(this).closest(".inp-deep-wrapper").find(".inp-deep-list").addClass("visible"),jQuery(this).closest(".inp-deep-wrapper").addClass("selected-deep-wrapper")}))},t.checkMultipleSelectedItems=function(e){u.selectedLayers=[];jQuery(".layer-on-timeline-selector").each(function(){var t=jQuery(this),a=u.getLayerByUniqueId(t.closest(".mastertimer-layer").data("uniqueid"));t.attr("checked")&&!0!==e?(a.references.htmlLayer.addClass("multiplelayerselected"),u.selectedLayers.push(a.unique_id)):(t.removeAttr("checked"),a.references.htmlLayer.removeClass("multiplelayerselected"))})},t.compareLayerEndsVSSlideEnd=function(){var e=10*t.mainMaxTimeLeft;jQuery.each(u.arrLayers,function(t,a){(a.endWithSlide||e<a.frames.frame_999.time-a.frames.frame_999.speed)&&(a.frames.frame_999.time=e+a.frames.frame_999.speed)}),t.updateAllLayerTimeline()},t.resetIdleSelector=function(){jQuery("#toggle-idle-hover").addClass("idleisselected").removeClass("hoverisselected"),jQuery("#tp-idle-state-advanced-style").show(),jQuery("#tp-hover-state-advanced-style").hide()},t.checkAnimationTab=function(){return!jQuery("#layeranimation-playpause").hasClass("inpause")&&jQuery("#rs-animation-tab-button").hasClass("selected")},t.checkLoopTab=function(){return!jQuery("#loopanimation-playpause").hasClass("inpause")&&jQuery("#rs-loopanimation-tab-button").hasClass("selected")},t.stopAllLayerAnimation=function(){document.getElementById("mastertimer-playpause-wrapper").innerHTML='<i class="eg-icon-play"></i><span>PLAY</span>',punchgs.TweenLite.set(document.getElementsByClassName("tp-mask-wrap"),{clearProps:"transform",overwrite:"all"}),jQuery(".tp-showmask").removeClass("tp-showmask");for(var e=document.getElementsByClassName("innerslide_layer"),a=0;a<e.length;a++){var r=jQuery(e[a]);if((e[a].parentNode.classList.contains("rs-preview-inside-looper")||e[a].parentNode.parentNode.classList.contains("rs-preview-inside-looper"))&&r.unwrap(),void 0!=r.data("tl")){var i=r.data("tl");i.clear(),i.kill();try{r.data("mySplitText")&&r.data("mySplitText").revert()}catch(e){}punchgs.TweenLite.set(r[0].parentNode,{autoAlpha:1}),t.rebuildLayerIdle(r.closest(".slide_layer")),u.removeCurrentLayerRotatable()}}punchgs.TweenLite.set(document.getElementById("startanim_wrapper"),{autoAlpha:0}),punchgs.TweenLite.set(document.getElementById("endanim_wrapper"),{autoAlpha:0})},t.callCaptionLoops=function(){t.stopAllLayerAnimation();var e=jQuery(".slide_layer.layer_selected"),a=e.find(".innerslide_layer").first();if(0==a.length)return!1;var r=u.getSerialFromID(e.attr("id"));params=u.getLayer(r),loopanim=params.loop_animation,a.closest(".rs-preview-inside-looper").length>0&&a.unwrap(),a.wrap('<div class="rs-preview-inside-looper" style="width:100%;height:100%;position:relative"></div>');var i=e.find(".rs-preview-inside-looper"),s=params.loop_startdeg,o=params.loop_enddeg,n=params.loop_speed,l=params.loop_xorigin+"% "+params.loop_yorigin+"%",d=params.loop_easing,c=params.loop_angle,m=parseInt(params.loop_radius,0),p=params.loop_xstart,f=params.loop_ystart,y=params.loop_xend,h=params.loop_yend,g=params.loop_zoomstart,v=params.loop_zoomend;factor=1;var _=new punchgs.TimelineLite;switch(_.pause(),loopanim){case"rs-pendulum":_.add(punchgs.TweenLite.fromTo(i,n,{force3D:"auto",rotation:s,transformOrigin:l},{rotation:o,ease:d})),_.add(punchgs.TweenLite.fromTo(i,n,{force3D:"auto",rotation:o},{rotation:s,ease:d,onComplete:function(){_.restart()}}));break;case"rs-rotate":_.add(punchgs.TweenLite.fromTo(i,n,{force3D:"auto",rotation:s,transformOrigin:l},{rotation:o,ease:d,onComplete:function(){_.restart()}}));break;case"rs-slideloop":_.add(punchgs.TweenLite.fromTo(i,n,{force3D:"auto",x:p,y:f},{x:y,y:h,ease:d})),_.add(punchgs.TweenLite.fromTo(i,n,{force3D:"auto",x:y,y:h},{x:p,y:f,onComplete:function(){_.restart()}}));break;case"rs-pulse":_.add(punchgs.TweenLite.fromTo(i,n,{force3D:"auto",scale:g},{scale:v,ease:d})),_.add(punchgs.TweenLite.fromTo(i,n,{force3D:"auto",scale:v},{scale:g,onComplete:function(){_.restart()}}));break;case"rs-wave":var b={a:0,ang:c,element:i,unit:m,xoffset:0+(parseInt(params.loop_xorigin,0)/100-.5)*i.width(),yoffset:-1*m+(parseInt(params.loop_yorigin,0)/100-.5)*i.height()},w=parseInt(c,0);_.add(punchgs.TweenLite.fromTo(b,n,{a:0+w},{a:360+w,force3D:"auto",ease:punchgs.Linear.easeNone,onUpdate:function(){var e=b.a*(Math.PI/180),t=b.yoffset+b.unit*(1-Math.sin(e)),a=b.xoffset+Math.cos(e)*b.unit;punchgs.TweenLite.to(b.element,.1,{force3D:"auto",x:a,y:t})},onComplete:function(){_.restart()}}))}_.play(),e.data("tl",_)},t.rebuildLayerIdle=function(e,a,r){if(a=void 0==a?50:a,r=void 0!=r&&r,0==g_rebuildTimer&&(a=0,g_rebuildTimer=999),void 0==e||0==jQuery(e).length||e[0].classList.contains("layer-deleted"))return!1;var i=jQuery(e);clearTimeout(i.data("idlerebuildtimer")),t.rebuildLayerIdleProgress(e);var s=u.getSerialFromID(e.attr("id")),o=u.getLayer(s,r),n=e.find(".tp-caption img");if(u.updateHtmlLayerPosition(!1,o,u.getVal(o,"top"),u.getVal(o,"left"),u.getVal(o,"align_hor"),u.getVal(o,"align_vert")),n.length>0&&!jQuery(n).hasClass("loaded")){jQuery(n).addClass("loaded");var l=new Image;l.onload=function(){o.originalWidth=this.width,o.originalHeight=this.height,u.updateHtmlLayerPosition(!1,o,u.getVal(o,"top"),u.getVal(o,"left"),u.getVal(o,"align_hor"),u.getVal(o,"align_vert"))},l.onerror=function(){n[0].src=o.image_url=g_revslider_url+"/admin/assets/images/tp-brokenimage.png",u.updateHtmlLayerPosition(!1,o,u.getVal(o,"top"),u.getVal(o,"left"),u.getVal(o,"align_hor"),u.getVal(o,"align_vert"))},l.onabort=function(){u.updateHtmlLayerPosition(!1,o,u.getVal(o,"top"),u.getVal(o,"left"),u.getVal(o,"align_hor"),u.getVal(o,"align_vert"))},l.src=n[0].src}else u.updateHtmlLayerCorners(o),u.updateCrossIconPosition(o);return u.extendSlideHeightBasedOnRows(),!0},t.rebuildLayerIdleProgress=function(caption){if(void 0!==caption){var is_demo=caption.attr("id")!==caption.attr("id").replace("demo_layer_");if(void 0==caption||0==jQuery(caption).length)return!1;var id=u.getSerialFromID(caption.attr("id")),params=u.getLayer(id,is_demo);if(void 0==params||0==params)return!1;punchgs.TweenLite.set(caption.find(".tp-mask-wrap"),{clearProps:"all",visibility:"visible",opacity:1}),"column"===params.type&&punchgs.TweenLite.set(caption.find(".column_background").first(),{clearProps:"all",visibility:"visible",opacity:1});var inlayer=jQuery(caption[0].getElementsByClassName("innerslide_layer")[0]),deform=params.deformation,deformidle=params.deformation,deformhover=params["deformation-hover"],ss=params.static_styles,fontcolor=u.getVal(ss,"color"),fonttrans=deform["color-transparency"],bgcolor=deform["background-color"],bgtrans=deform["background-transparency"],bordercolor=deform["border-color"],bordertrans=deform["border-transparency"];if("audio"==params.type)return params.video_data.video_show_visibility?caption.addClass("invisible-audio"):caption.removeClass("invisible-audio"),!1;if(is_demo&&params.alias,void 0!=inlayer.data("mySplitText")){try{inlayer.data("mySplitText").revert()}catch(e){}"text"!=params.type&&"button"!=params.type||(inlayer[0].innerHTML=params.text,u.makeCurrentLayerRotatable()),inlayer.removeData("mySplitText")}if(Number(bgtrans)<1){var rgb=UniteAdminRev.convertHexToRGB(bgcolor);bgcolor="rgba("+rgb[0]+","+rgb[1]+","+rgb[2]+","+bgtrans+")"}if(Number(bordertrans)<1){var rgb=UniteAdminRev.convertHexToRGB(bordercolor);bordercolor="rgba("+rgb[0]+","+rgb[1]+","+rgb[2]+","+bordertrans+")"}if(Number(fonttrans)<1){var rgb=UniteAdminRev.convertHexToRGB(fontcolor);fontcolor="rgba("+rgb[0]+","+rgb[1]+","+rgb[2]+","+fonttrans+")"}var mwidth=u.getVal(params,"max_width"),mheight=u.getVal(params,"max_height"),cmode=u.getVal(params,"cover_mode"),loc_position="absolute";switch(params.type){case"image":mwidth=u.getVal(params,"scaleX"),mheight=u.getVal(params,"scaleY");break;case"video":mwidth=!0===params.video_data.cover||!0===params.video_data.fullwidth?"100%":u.getVal(params,"video_width"),mheight=!0===params.video_data.cover||!0===params.video_data.fullwidth?"100%":u.getVal(params,"video_height"),caption.find(".slide_layer_video").css({width:parseInt(mwidth,0)+"px",height:parseInt(mheight,0)+"px"});break;case"row":mwidth="100%","bottom"===u.getVal(params,"align_vert")?caption[0].style.position="absolute":caption[0].style.position="relative","mobile"===params.column_break_at&&"mobile"===t.layout||"tablet"===params.column_break_at&&("tablet"===t.layout||"mobile"===t.layout)||"notebook"===params.column_break_at&&"desktop"!==t.layout?caption.addClass("rev_breakcolumns"):caption.removeClass("rev_breakcolumns");break;case"column":mwidth=100*eval(params.column_size)+"%",mheight="auto",caption[0].style.position="relative",caption[0].style.display="table_cell",caption[0].style.minHeight=parseInt(u.getVal(params,"min_height"),0)+"px",caption[0].cb=void 0===caption[0].cb?caption.find(".column_background"):caption[0].cb,void 0!==params.bgimage_url&&params.bgimage_url.length>0?caption[0].cb.css({backgroundImage:"url('"+params.bgimage_url+"')",backgroundSize:params.layer_bg_size,backgroundPosition:params.layer_bg_position,backgroundRepeat:params.layer_bg_repeat,backgroundColor:bgcolor}):caption[0].cb.css({backgroundImage:"",backgroundColor:bgcolor});break;case"group":switch(mwidth){case"#1/1#":mwidth="100%";break;case"#1/2#":mwidth="50%";break;case"#1/3#":mwidth="33.333333%";break;case"#2/3#":mwidth="66.666666%";break;case"#1/4#":mwidth="25%";break;case"#3/4#":mwidth="75%";break;case"#1/5#":mwidth="20%";break;case"#2/5#":mwidth="40%";break;case"#3/5#":mwidth="60%";break;case"#4/5#":mwidth="80%";break;case"#1/6#":mwidth="16.666666%";break;case"#4/6#":mwidth="66.666666%";break;case"#5/6#":mwidth="83.333333%"}}void 0!==deform.overflow&&"group"===params.type||(deform.overflow="visible"),void 0==mwidth&&(mwidth=""),void 0==mheight&&(mheight=""),-1!==params.p_uid&&"column"===u.getObjLayerType(params.p_uid)?punchgs.TweenLite.set(caption,{position:"relative",display:u.getVal(params,"display"),top:"auto",left:"auto",right:"auto",bottom:"auto"}):"column"===params.type?punchgs.TweenLite.set(caption,{position:"absolute",display:"table-cell"}):punchgs.TweenLite.set(caption,{position:"absolute",display:"block"}),"column"===params.type&&(bgcolor="transparent"),mwidth=void 0===cmode||"custom"===cmode?jQuery.isNumeric(mwidth)?mwidth+"px":mwidth.match(/px/g)?parseInt(mwidth,0)+"px":mwidth.match(/%/g)?parseFloat(mwidth)+"%":mwidth:"fullwidth"===cmode||"cover"===cmode||"cover-proportional"===cmode?"100%":mwidth,mheight=void 0===cmode||"custom"===cmode?jQuery.isNumeric(mheight)?mheight+"px":mheight.match(/px/g)?parseInt(mheight,0)+"px":mheight.match(/%/g)?parseFloat(mheight,0)+"%":mheight:"fullheight"===cmode||"cover"===cmode||"cover-proportional"===cmode?"100%":mheight,caption[0].style.width=mwidth,caption[0].style.height=mheight;var fw=parseInt(u.getVal(ss,"font-weight"),0)||400,bgimage="";punchgs.TweenLite.set(inlayer,{clearProps:"all",visibility:"visible",opacity:1}),void 0!==params.bgimage_url&&params.bgimage_url.length>0&&"column"!==params.type?inlayer.css({backgroundImage:"url('"+params.bgimage_url+"')",backgroundSize:params.layer_bg_size,backgroundPosition:params.layer_bg_position,backgroundRepeat:params.layer_bg_repeat}):inlayer.css({backgroundImage:"",backgroundSize:params.layer_bg_size,backgroundPosition:params.layer_bg_position,backgroundRepeat:params.layer_bg_repeat});var inlay_object_anim={z:deform.z,scaleX:parseFloat(deform.scalex),scaleY:parseFloat(deform.scaley),textAlign:u.getVal(params,"text-align"),rotationX:parseFloat(deform.xrotate),rotationY:parseFloat(deform.yrotate),rotationZ:parseFloat(params["2d_rotation"]),skewX:parseFloat(deform.skewx),skewY:parseFloat(deform.skewy),transformPerspective:parseFloat(deform.pers),transformOrigin:params.layer_2d_origin_x+"% "+params.layer_2d_origin_y+"%",autoAlpha:deform.opacity,paddingTop:parseInt(u.getVal(params,"padding")[0],0)+"px",paddingRight:parseInt(u.getVal(params,"padding")[1],0)+"px",paddingBottom:parseInt(u.getVal(params,"padding")[2],0)+"px",paddingLeft:parseInt(u.getVal(params,"padding")[3],0)+"px",fontSize:parseInt(u.getVal(ss,"font-size"),0)+"px",lineHeight:parseInt(u.getVal(ss,"line-height"),0)+"px",fontWeight:fw,color:fontcolor,backgroundColor:bgcolor,fontFamily:deformidle["font-family"],fontStyle:deformidle["font-style"],textDecoration:deform["text-decoration"],textTransform:deform["text-transform"],borderColor:bordercolor,borderRadius:deform["border-radius"][0]+" "+deform["border-radius"][1]+" "+deform["border-radius"][2]+" "+deform["border-radius"][3],borderWidth:deform["border-width"][0]+" "+deform["border-width"][1]+" "+deform["border-width"][2]+" "+deform["border-width"][3],borderStyle:deform["border-style"],whiteSpace:u.getVal(params,"whitespace"),maxWidth:"100%",maxHeight:"100%"};if(void 0!==deform.blurfilter&&parseInt(deform.blurfilter,0)>0||void 0!==deformhover.blurfilter&&parseInt(deformhover.blurfilter,0)>0){var bf="blur("+parseInt(deform.blurfilter,0)+"px)";inlay_object_anim["-webkit-filter"]=bf,inlay_object_anim.filter=bf}if(void 0!==deform.grayscalefilter&&parseInt(deform.grayscalefilter,0)>0||void 0!==deformhover.grayscalefilter&&parseInt(deformhover.grayscalefilter,0)>0){var gf="grayscale("+parseInt(deform.grayscalefilter,0)+"%)";inlay_object_anim["-webkit-filter"]=void 0===inlay_object_anim["-webkit-filter"]?gf:inlay_object_anim["-webkit-filter"]+" "+gf,inlay_object_anim.filter=void 0===inlay_object_anim.filter?gf:inlay_object_anim.filter+" "+gf}switch(deformidle["font-family"]&&(inlay_object_anim.fontFamily=deformidle["font-family"]),"group"===params.type&&punchgs.TweenLite.set(inlayer.find(".tp_layer_group_inner_wrapper").first(),{overflow:deform.overflow}),void 0!==params.layer_blend_mode&&jQuery.inArray(params.type,["image","shape","text","svg"]>=0)&&punchgs.TweenLite.set(inlayer.closest(".slide_layer"),{mixBlendMode:params.layer_blend_mode}),params.type){case"shape":case"svg":punchgs.TweenLite.set(caption,{marginTop:parseInt(u.getVal(params,"margin")[0],0)+"px",marginRight:parseInt(u.getVal(params,"margin")[1],0)+"px",marginBottom:parseInt(u.getVal(params,"margin")[2],0)+"px",marginLeft:parseInt(u.getVal(params,"margin")[3],0)+"px"});break;case"column":punchgs.TweenLite.set(caption.find(".column_background"),{borderTopWidth:parseInt(u.getVal(params,"margin")[0],0)+"px",borderRightWidth:parseInt(u.getVal(params,"margin")[1],0)+"px",borderBottomWidth:parseInt(u.getVal(params,"margin")[2],0)+"px",borderLeftWidth:parseInt(u.getVal(params,"margin")[3],0)+"px"}),inlay_object_anim.marginTop=parseInt(u.getVal(params,"margin")[0],0)+"px",inlay_object_anim.marginRight=parseInt(u.getVal(params,"margin")[1],0)+"px",inlay_object_anim.marginBottom=parseInt(u.getVal(params,"margin")[2],0)+"px",inlay_object_anim.marginLeft=parseInt(u.getVal(params,"margin")[3],0)+"px";break;default:punchgs.TweenLite.set(caption,{marginTop:parseInt(u.getVal(params,"margin")[0],0)+"px",marginRight:parseInt(u.getVal(params,"margin")[1],0)+"px",marginBottom:parseInt(u.getVal(params,"margin")[2],0)+"px",marginLeft:parseInt(u.getVal(params,"margin")[3],0)+"px"})}if("image"===params.type&&(params.scaleProportional?(punchgs.TweenLite.set(inlayer.find("img"),{width:"100%",height:"auto"}),inlay_object_anim.width="100%",inlay_object_anim.height="auto"):(punchgs.TweenLite.set(inlayer.find("img"),{width:"100%",height:"100%"}),inlay_object_anim.width="100%",inlay_object_anim.height="100%")),"video"===params.type&&(punchgs.TweenLite.set(inlayer.find(".slide_layer_video"),{width:"100%",height:"100%"}),inlay_object_anim.width="100%",inlay_object_anim.height="100%"),"svg"===params.type&&void 0!=params.svg){var svgstrokecolor=params.svg["svgstroke-color"]||"transparent",svgstroketrans=params.svg["svgstroke-transparency"]||0,svgstrokewidth=params.svg["svgstroke-width"]||0,svgstrokedasharray=params.svg["svgstroke-dasharray"]||0,svgstrokedashoffset=params.svg["svgstroke-dashoffset"]||0;if(Number(svgstroketrans)<1){var rgb=UniteAdminRev.convertHexToRGB(svgstrokecolor);svgstrokecolor="rgba("+rgb[0]+","+rgb[1]+","+rgb[2]+","+svgstroketrans+")"}punchgs.TweenLite.set(inlayer.find("svg"),{fill:fontcolor,stroke:svgstrokecolor,strokeWidth:svgstrokewidth,strokeDasharray:svgstrokedasharray,strokeDashoffset:svgstrokedashoffset}),punchgs.TweenLite.set(inlayer.find("svg path"),{fill:fontcolor})}if(punchgs.TweenLite.set(inlayer,inlay_object_anim),void 0!=params.inline&&void 0!=params.inline.idle&&jQuery.each(params.inline.idle,function(e,t){inlayer.css(e,t)}),!0===params.hover){deform=params["deformation-hover"];var fontcolor=deform.color,fonttrans=deform["color-transparency"],bgcolor=deform["background-color"],bgtrans=deform["background-transparency"],bordercolor=deform["border-color"],bordertrans=deform["border-transparency"];if(Number(bgtrans)<1){var rgb=UniteAdminRev.convertHexToRGB(bgcolor);bgcolor="rgba("+rgb[0]+","+rgb[1]+","+rgb[2]+","+bgtrans+")"}if(Number(bordertrans)<1){var rgb=UniteAdminRev.convertHexToRGB(bordercolor);bordercolor="rgba("+rgb[0]+","+rgb[1]+","+rgb[2]+","+bordertrans+")"}if(Number(fonttrans)<1){var rgb=UniteAdminRev.convertHexToRGB(fontcolor);fontcolor="rgba("+rgb[0]+","+rgb[1]+","+rgb[2]+","+fonttrans+")"}var tl=new punchgs.TimelineLite;tl.pause();var hoverspeed=parseFloat(deform.speed)/1e3;hoverspeed=0===hoverspeed?.001:hoverspeed;var hover_object_anim={scaleX:parseFloat(deform.scalex),scaleY:parseFloat(deform.scaley),rotationX:parseFloat(deform.xrotate),rotationY:parseFloat(deform.yrotate),rotationZ:parseFloat(deform["2d_rotation"]),skewX:parseFloat(deform.skewx),skewY:parseFloat(deform.skewy),autoAlpha:deform.opacity,color:fontcolor,backgroundColor:bgcolor,textDecoration:deform["text-decoration"],borderColor:bordercolor,borderRadius:parseInt(deform["border-radius"][0],0)+"px "+parseInt(deform["border-radius"][1],0)+"px "+parseInt(deform["border-radius"][2],0)+"px "+parseInt(deform["border-radius"][3],0)+"px",borderWidth:parseInt(deform["border-width"][0],0)+"px "+parseInt(deform["border-width"][1],0)+"px "+parseInt(deform["border-width"][2],0)+"px "+parseInt(deform["border-width"][3],0)+"px",borderStyle:deform["border-style"],onComplete:function(){params.inline&&void 0!=params.inline.hover&&jQuery.each(params.inline.hover,function(e,t){inlayer.css(e,t)})},ease:deform.easing};if(void 0!==deform.blurfilter&&parseInt(deform.blurfilter,0)>0||void 0!==deformidle.blurfilter&&parseInt(deformidle.blurfilter,0)>0){var bf="blur("+parseInt(deform.blurfilter,0)+"px)";hover_object_anim["-webkit-filter"]=bf,hover_object_anim.filter=bf}if(void 0!==deform.grayscalefilter&&parseInt(deform.grayscalefilter,0)>0||void 0!==deformidle.grayscalefilter&&parseInt(deformidle.grayscalefilter,0)>0){var gf="grayscale("+parseInt(deform.grayscalefilter,0)+"%)";hover_object_anim["-webkit-filter"]=void 0===hover_object_anim["-webkit-filter"]?gf:hover_object_anim["-webkit-filter"]+" "+gf,hover_object_anim.filter=void 0===hover_object_anim.filter?gf:hover_object_anim.filter+" "+gf}if(tl.add(punchgs.TweenLite.to(inlayer,hoverspeed,hover_object_anim)),"svg"===params.type&&void 0!=params.svg){var svgstrokecolor=params.svg["svgstroke-hover-color"]||"transparent",svgstroketrans=params.svg["svgstroke-hover-transparency"]||0,svgstrokewidth=params.svg["svgstroke-hover-width"]||0,svgstrokedasharray=params.svg["svgstroke-hover-dasharray"]||0,svgstrokedashoffset=params.svg["svgstroke-hover-dashoffset"]||0;if(Number(svgstroketrans)<1){var rgb=UniteAdminRev.convertHexToRGB(svgstrokecolor);svgstrokecolor="rgba("+rgb[0]+","+rgb[1]+","+rgb[2]+","+svgstroketrans+")"}tl.add(punchgs.TweenLite.to(inlayer.find("svg"),hoverspeed,{fill:fontcolor,stroke:svgstrokecolor,strokeWidth:svgstrokewidth,strokeDasharray:svgstrokedasharray,strokeDashoffset:svgstrokedashoffset,ease:deform.easing}),0)}inlayer.data("hoveranim",tl),void 0!==caption.data("hoverexist")&&!1!==caption.data("hoverexist")||(caption.hover(function(){if(jQuery("#rs-style-tab-button").hasClass("selected")&&jQuery("#toggle-idle-hover").hasClass("idleisselected")){var e=jQuery(this).find(".innerslide_layer").first();e.length>0&&void 0!=e.data("hoveranim")&&e.data("hoveranim").play(0)}},function(){if(jQuery("#rs-style-tab-button").hasClass("selected")&&jQuery("#toggle-idle-hover").hasClass("idleisselected")){var e=jQuery(this).find(".innerslide_layer").first();e.length>0&&void 0!=e.data("hoveranim")&&e.data("hoveranim").reverse()}}),caption.data("hoverexist",!0)),document.getElementById("toggle-idle-hover").classList.contains("hoverisselected")?tl.seek(tl.endTime()):(tl.seek(0),tl.pause(0),setTimeout(function(){tl.pause(0)},109))}else caption.unbind("hover"),caption.data("hoverexist",!1)}},t.animateCurrentSelectedLayer=function(e){u.removeCurrentLayerRotatable();var t=jQuery(".slide_layer.layer_selected").find(".innerslide_layer").first();if(0==t.length)return!1;if(void 0==t.data("tl"))a=new punchgs.TimelineLite;else var a=t.data("tl");a.clear(),a.kill(),a.pause(),t.data("inanim",theLayerInAnimation(t)),t.data("outanim",theLayerOutAnimation(t)),a.addLabel("inanimation"),a.add(t.data("inanim"),"=+0.2"),a.addLabel("outanimation"),a.add(punchgs.TweenLite.fromTo(jQuery("#startanim_timerunner"),1,{x:0,y:0},{y:41}),"outanimation"),a.add(punchgs.TweenLite.fromTo(jQuery("#startanim_timerunnerbox"),1,{x:0,y:0},{y:41}),"outanimation"),a.add(punchgs.TweenLite.fromTo(jQuery("#endanim_timerunnerbox"),1,{x:0,y:-41},{x:0,y:0}),"outanimation"),a.add(punchgs.TweenLite.fromTo(jQuery("#endanim_timerunner"),1,{x:0,y:-41},{y:0}),"outanimation"),a.add(punchgs.TweenLite.set(jQuery("#endanim_wrapper"),{width:67,autoAlpha:1}),"outanimation"),a.add(t.data("outanim")),a.eventCallback("onComplete",function(){a.restart()}),a.play(),t.data("tl",a)};var checkAnimValue=function(e,t,a,r){var i=e,s=t;if(jQuery.isNumeric(parseFloat(i)))return parseFloat(i);if(void 0===i||"inherit"===i)return s;if(i.split("{").length>1){var o=i.split(",");return max=o[1].split("}")[0],o=o[0].split("{")[1],i=Math.random()*(max-o)+o}var n=jQuery("#divLayers").width(),l=jQuery("#divLayers").height(),d=a.closest(".slide_layer"),u=d.width(),c=d.height(),m=d.position();if(i.match(/%]/g))i=i.split("[")[1].split("]")[0],"horizontal"==r?i=u*parseInt(i,0)/100:"vertical"==r&&(i=c*parseInt(i,0)/100);else switch(i.toLowerCase()){case"top":case"stage_top":i=0-c-m.top;break;case"bottom":case"stage_bottom":i=l;break;case"stage_left":case"left":i=0-u-m.left;break;case"right":case"stage_right":i=n;break;case"center":case"stage_center":i=n/2-m.left-u/2;break;case"middle":case"stage_middle":i=l/2-m.top-c/2;break;case"layer_top":i=0-c;break;case"layer_bottom":i=c;break;case"layer_left":i=0-u;break;case"layer_right":i=u;break;case"layer_center":i=u/2;break;case"layer_middle":i=c/2}return i},initSlideDuration=function(){var e=jQuery("#delay").val();void 0!=e&&0!=e&&"undefined"!=e||(e=g_slideTime),jQuery("#mastertimer-maxtime").css({left:e/10})};t.masterTimerPositionChange=function(e){var a=jQuery(document.getElementById("mastertimer-position")),r=(a[0].getBoundingClientRect().left-document.getElementById("master-rightheader").getBoundingClientRect().left+t.timercorrectur)/100,i=jQuery(document.getElementById("divbgholder")).data("slidetimeline");if(a[0].className=a[0].classList.contains("hovering")?a[0].className:a[0].className+" hovering",r<=0&&("wasnotidle"==a.data("wasidle")||void 0==a.data("wasidle"))&&(t.stopAllLayerAnimation(),a.data("wasidle","wasidle"),void 0!=a.data("tl")&&a.data("tl").kill(),void 0!=i&&(i.stop(),i.seek(1e5)),t.allLayerToIdle()),r>0&&("wasidle"==a.data("wasidle")||void 0==a.data("wasidle"))&&(a.data("wasidle","wasnotidle"),createGlobalTimeline(!0),document.getElementById("mastertimer-playpause-wrapper").innerHTML='<i class="eg-icon-play"></i><span>PLAY</span>',a[0].className=a[0].classList.contains("inaction")?a[0].className:a[0].className+" inaction"),r>0&&"wasnotidle"==a.data("wasidle")){e&&createGlobalTimeline(!1);var s=a.data("tl");s.stop(),i.stop(),s.seek(r),i.seek(r)}if(r>0)(o=document.getElementById("mastertimer-poscurtime")).className=o.classList.contains("movedalready")?o.className:o.className+" movedalready",o.innerHTML=t.convToTime(100*r),a.removeClass("timerinidle");else{var o=document.getElementById("mastertimer-poscurtime");o.classList.contains("movedalready")&&(o.innerHTML="Idle",a.addClass("timerinidle"))}a.trigger("poschanged")},t.convToTime=function(e){var t=Math.floor(e/6e3),a=Math.floor(Math.ceil(e-6e3*t)/100),r=Math.round(e-100*a-6e3*t);return 0==t?t="00":t<10&&(t="0"+t.toString()),0==a?a="00":a<10&&(a="0"+a.toString()),0==r?r="00":r<10&&(r="0"+r.toString()),t.toString()+":"+a.toString()+"."+r.toString()},t.allLayerToIdle=function(e){var a=void 0!=e&&void 0!=e.type?"slide_layer_type_"+e.type:"slide_layer";elements=document.getElementsByClassName(a);for(var r=0;r<elements.length;r++)t.rebuildLayerIdle(jQuery(elements[r]))};var initMasterTimer=function(){function e(){__coffset=parseInt(jQuery("#layers-right").offset().left,0)}jQuery("#master-rightheader");jQuery("#mastertimer-position").on("poschanged",function(){var e=jQuery(this),a=Math.round(e.position().left+t.timercorrectur),r=t.convToTime(a);a<0&&(r="IDLE"),document.getElementById("master-timer-time").innerHTML=r}),jQuery("#mastertimer-backtoidle").click(function(){jQuery("#mastertimer-position").removeClass("inaction"),document.getElementById("mastertimer-playpause-wrapper").innerHTML='<i class="eg-icon-play"></i><span>PLAY</span>',document.getElementById("master-timer-time").innerHTML="IDLE",t.stopAllLayerAnimation();var e=jQuery("#mastertimer-position"),a=jQuery("#divbgholder").data("slidetimeline");e.css({left:"-15px"}),void 0!=e.data("tl")&&e.data("tl").kill(),void 0!=a&&(a.stop(),a.seek(1e5)),t.allLayerToIdle()}),jQuery("#divLayers").hover(function(){var e=jQuery(document.getElementById("mastertimer-position")),a=document.getElementById("mastertimer-playpause-wrapper"),r=jQuery(document.getElementById("divbgholder")).data("slidetimeline");void 0!=e.data("tl")&&e.data("tl").stop(),void 0!=r&&(r.stop(),r.seek(1e5)),e.removeClass("inaction"),a.innerHTML='<i class="eg-icon-play"></i><span>PLAY</span>',e.hasClass("hovering")&&(e.removeClass("hovering"),t.stopAllLayerAnimation(),t.allLayerToIdle(),jQuery("#layeranimation-playpause").hasClass("inpuase")||t.checkAnimationTab()&&t.animateCurrentSelectedLayer(1),jQuery("#loopanimation-playpause").hasClass("inpuase")||t.checkLoopTab()&&t.animateCurrentSelectedLayer(2))}),jQuery("#mastertimer-wrapper").hover(function(){jQuery(this).hasClass("overme")||(jQuery(this).addClass("overme"),t.masterTimerPositionChange(!0))},function(){jQuery(this).removeClass("overme")}),jQuery("#mastertimer-position").draggable({axis:"x",start:function(e,a){punchgs.TweenLite.set(document.getElementById("mastertimer-curtime"),{autoAlpha:0,x:-3,y:-10}),punchgs.TweenLite.set(document.getElementById("mastertimer-curtime-b"),{autoAlpha:0}),t.deactivatePerfectScrollBars()},drag:function(e,a){a.position.left=Math.max(-15,a.position.left),t.masterTimerPositionChange(!1)},stop:function(e,t){punchgs.TweenLite.set(document.getElementById("mastertimer-curtime"),{autoAlpha:1,x:-1,y:0,ease:punchgs.Power2.easeInOut}),punchgs.TweenLite.set(document.getElementById("mastertimer-curtime-b"),{autoAlpha:1})}}),jQuery("#mastertimer-linear").click(function(e){var a=jQuery("#mastertimer-linear").offset().left,r=jQuery("#master-rightheader").scrollLeft();jQuery("#mastertimer-position").css({left:e.pageX-a+r+"px"}),t.masterTimerPositionChange()}),jQuery("#mastertimer-maxtime").draggable({axis:"x",containment:"#master-rightheader",create:function(e,a){t.mainMaxTimeLeft=jQuery("#mastertimer-maxtime").position().left,document.getElementById("mastertimer-maxcurtime").innerHTML=t.convToTime(t.mainMaxTimeLeft),t.setIdleZones()},start:function(e,a){punchgs.TweenLite.set(document.getElementById("mastertimer-curtime"),{autoAlpha:0,x:-3,y:-10}),punchgs.TweenLite.set(document.getElementById("mastertimer-curtime-b"),{autoAlpha:0}),document.getElementById("mastertimer-maxcurtime").innerHTML=t.convToTime(t.mainMaxTimeLeft),t.setIdleZones(),t.deactivatePerfectScrollBars()},drag:function(e,a){t.mainMaxTimeLeft=a.position.left,document.getElementById("mastertimer-maxcurtime").innerHTML=t.convToTime(t.mainMaxTimeLeft),document.getElementById("delay").value=10*t.mainMaxTimeLeft,t.setIdleZones(),t.compareLayerEndsVSSlideEnd()},stop:function(e,a){punchgs.TweenLite.set(document.getElementById("mastertimer-curtime"),{autoAlpha:1,x:-1,y:0,ease:punchgs.Power2.easeInOut}),punchgs.TweenLite.set(document.getElementById("mastertimer-curtime-b"),{autoAlpha:1}),t.mainMaxTimeLeft=a.position.left,document.getElementById("mastertimer-maxcurtime").innerHTML=t.convToTime(t.mainMaxTimeLeft),document.getElementById("delay").value=10*t.mainMaxTimeLeft,t.setIdleZones(),g_slideTime=10*t.mainMaxTimeLeft,u.setMaintime(g_slideTime),t.compareLayerEndsVSSlideEnd(),t.rerenderAllAudioMap()}}),__ctime=jQuery("#mastertimer-curtime"),__ctimeb=jQuery("#mastertimer-curtime-b"),__ctimei=jQuery("#mastertimer-curtimeinner"),jQuery(window).resize(function(){e()}),e(),__ctime.data("offset",0),jQuery(".master-rightcell").on("mousemove",function(e){var a=e.pageX-__coffset-jQuery(document.getElementById("master-rightheader")).data("left");0==__ctime.data("offset")&&(punchgs.TweenLite.set(__ctime,{left:a}),punchgs.TweenLite.set(__ctimeb,{left:a+15}),__ctimei[0].innerHTML=t.convToTime(a-10))}),jQuery("#mastertimer-playpause-wrapper").click(function(){var e=jQuery(this);if(punchgs.TweenLite.to(jQuery("#mastertimer-poscurtime"),.3,{autoAlpha:0,x:-3,y:-10,ease:punchgs.Power2.easeInOut}),e.find(".eg-icon-pause").length>0)document.getElementById("mastertimer-playpause-wrapper").innerHTML='<i class="eg-icon-play"></i><span>PLAY</span>',t.stopAllLayerAnimation(),void 0!=(a=jQuery("#mastertimer-position")).data("tl")&&a.data("tl").kill();else{createGlobalTimeline(!0),document.getElementById("mastertimer-playpause-wrapper").innerHTML='<i class="eg-icon-pause"></i><span>PAUSE</span>',jQuery("#mastertimer-position").addClass("inaction");var a=jQuery("#mastertimer-position"),r=a.data("tl"),i=jQuery("#divbgholder").data("slidetimeline"),s=a.position().left/100;r.play(s),i.play(s),jQuery("#divbgholder").data("slidetimeline").play(s),r.eventCallback("onComplete",function(){r.play(0),i.play(0)}),r.eventCallback("onUpdate",function(){a.css({left:100*r.time()}),a.trigger("poschanged")})}})};t.setIdleZones=function(){for(var e=document.getElementsByClassName("slide-idle-section"),a=0;a<e.length;a++)e[a].style.left=t.mainMaxTimeLeft+15+"px"};var setFakeAnim=function(){var e=jQuery(".slide-trans-cur-ul li").first(),t=e.data("animval"),a=e.text();return"random-selected"!=t&&"random"!=t&&"random-static"!=t&&"random-premium"!=t||(t="fade",a="Fade"),document.getElementById("fake-select-label").innerHTML='"'+a+'"',jQuery("#fake-select-label").data("valu",t),removeAllSlots(),slideAnimation(),!0,!1};t.setSlideTransitionTimerBar=function(){var e=document.getElementById("slide_in_sort_time"),a=e.getElementsByClassName("timeline_frame")[0],r=e.getElementsByClassName("timeline_full")[0],i=document.getElementById("transition_duration")?document.getElementById("transition_duration").value:0;e.getElementsByClassName("duration_cont")[0].innerHTML=i,jQuery.isNumeric(i)||(i=500),punchgs.TweenLite.set(a,{width:i/10}),punchgs.TweenLite.set(r,{left:15,width:t.mainMaxTimeLeft})};var addSlideToSortbox=function(){t.setSlideTransitionTimerBar();var e=document.getElementById("slide_in_sort_time"),a=e.getElementsByClassName("timeline_frame")[0],r=e.getElementsByClassName("duration_cont")[0];jQuery(a).resizable({minWidth:0,handles:"e",start:function(e,t){},stop:function(e,a){document.getElementById("transition_duration").value=10*a.size.width,r.innerHTML=10*a.size.width,jQuery(".slide-trans-cur-ul li.selected").data("duration",10*a.size.width),t.resetSlideAnimations(!0)},resize:function(e,t){document.getElementById("transition_duration").value=10*t.size.width,jQuery(".slide-trans-cur-ul li.selected").data("duration",10*t.size.width),r.innerHTML=10*t.size.width}})};t.rerenderAllAudioMap=function(){jQuery.each(u.arrLayers,function(e,a){"audio"==a.type&&t.drawAudioMap(a)})},t.drawAudioMap=function(e){var t=e.references.sorttable.timeline;if(t.data("lastaudio")==e.video_data.urlAudio&&void 0!=t.data("audiobuffer")?displayAudioBuffer(e,t.data("audiobuffer")):loadMusicTimeLine(e,e.video_data.urlAudio),t.data("lastaudio",e.video_data.urlAudio),!AudioContext)return console.log("Audio Map cannot be drawn  in your Browser. Try a recent Chrome or Firefox. "),!1},t.addToSortbox=function(e,a){if(1===document.getElementById("layers-right-ul").children.length&&addSlideToSortbox(),void 0===e)return!1;t.isLayerVisible(a.references.htmlLayer);var r="",i="",s=t.getSortboxText(a.alias),o=Number(a.order)+5,n="",l="",d=void 0!==a.groupLink?a.groupLink:0;switch(a.type){case"group":r=" sortable_elements sortable_group",i=" droppable_sortable_group";break;case"row":r="  sortable_elements sortable_group sortable_row",i=" droppable_sortable_row";break;case"column":r=" sortable_elements sortable_column",i=" droppable_sortable_column";break;default:r=" sortable_elements sortable_layers"}switch(a.deleted&&(r+=" layer-deleted"),n+='<li data-uniqueid="'+a.unique_id+'" id="layer_sort_'+e+'" data-type="'+a.type+'" class="mastertimer-layer ui-state-default'+r+'" data-grouptype="'+a.grouptype+'" data-pid="'+a.p_uid+'">',n+='    <div class="layer_sort_inner_wrapper '+i+'">',n+='        <span class="mastertimer-timeline-selector-row tipsy_enabled_top" title="Select Layer in Timeline">',n+='            <input data-uniqueid="'+a.unique_id+'"  id="lots_id_'+a.unique_id+'" class="layer-on-timeline-selector" style="margin:0px" type="checkbox"/>',n+="        </span>",n+='        <span data-uniqueid="'+a.unique_id+'" class="list-of-layer-links tipsy_enabled_top" title="Choose Layers Group Link">',n+='            <span class="layer-link-type-element layer-link-type-element-cs layer-link-type-'+d+'"></span>',n+='            <span class="list-of-layer-links-inner">',n+='                <span data-linktype="1" class="layer-link-type-element layer-link-type-1"></span>',n+='                <span data-linktype="2" class="layer-link-type-element layer-link-type-2"></span>',n+='                <span data-linktype="3" class="layer-link-type-element layer-link-type-3"></span>',n+='                <span data-linktype="4" class="layer-link-type-element layer-link-type-4"></span>',n+='                <span data-linktype="5" class="layer-link-type-element layer-link-type-5"></span>',n+='                <span data-linktype="0" class="layer-link-type-element layer-link-type-0"></span>',n+="            </span>",n+="        </span>","column"!=a.type?"row"!==a.type?(n+='        <span  class="mastertimer-timeline-zindex-row tipsy_enabled_top" title="z-Index">',n+='\t\t\t<i style="margin-left:15px;margin-right:0px;" class="layersortclass eg-icon-sort"></i>',n+='\t\t\t<span class="sortbox_depth" title="z-Index">'+o+"</span>",n+="\t\t</span>"):n+='    <span  class="mastertimer-timeline-zindex-row tipsy_enabled_top" style="cursor:default !important" title="z-Index"></span>':n+='     <span class="column_sort_row_spacer"></span>',n+='        <span class="mastertimer-timeline-tillendcontainer" style="">',n+='            <span data-uniqueid="'+a.unique_id+'" data-serial="'+e+'" class="till_slideend tipsy_enabled_top " title="Wait till Slides End / Custom End"><i class="eg-icon-back-in-time"></i><i class="eg-icon-download-2"></i></span>',n+="\t\t</span>",n+='\t\t<span class="sort-hover-part layer_sort_layer_text_field">',n+='\t\t\t<span class="sortbox_text"><i class="layertypeclass ',a.type){case"group":n+="fa-icon-object-group";break;case"row":n+="rs-icon-layergroup";break;case"column":n+="rs-icon-layercolumns";break;case"text":n+="rs-icon-layerfont";break;case"image":n+="rs-icon-layerimage";break;case"video":n+="rs-icon-layervideo";break;case"audio":n+="rs-icon-layeraudio";break;case"button":n+="rs-icon-layerbutton";break;case"shape":n+="rs-icon-layershape";break;case"svg":n+="rs-icon-layersvg"}n+='"></i>',n+='\t\t\t\t<input class="timer-layer-text" style="margin-top:-1px !important" type="text" enabled value="'+s+'">',n+="\t\t\t</span>",n+="\t\t</span>","group"!=a.type&&"row"!=a.type&&"column"!=a.type||(n+='        <span class="sort_group_collapser"><i class="eg-icon-down-dir"></i><i class="eg-icon-right-dir"></i></span>'),"column"!=a.type&&(n+='\t\t<span class="timer-manual-edit"><i class="eg-icon-pencil"></i></span>'),n+="\t</div>","group"!=a.type&&"row"!=a.type||(n+='<ul id="sortable_group_'+a.unique_id+'" class="sortable_groups_wrap sgw_def"></ul>'),"column"==a.type&&(n+='<ul id="sortable_columns_'+a.unique_id+'" class="sortable_layers_in_columns sgw_def"></ul>'),n+="</li>";var u="";void 0!=a.p_uid&&-1!==a.p_uid&&"row"!==a.type&&"group"!==a.type&&(u=" quick_in_group"),"row"===a.type&&(u+=" quick_in_row"),l+='<li id="layer_quicksort_'+e+'" data-serial="'+e+'" class="quicksortlayer ui-state-default layer-toolbar-li'+u+'">';var c='<span class="quick-edit-toolbar-in-list">';switch(a.type){case"text":l+='<span class="layer-short-tool revdarkgray layer-title-with-icon"><i class="rs-icon-layerfont_n"></i>',c+='<span id="button_edit_layer_'+e+'" class="button_edit_layer layer-short-tool revblue"><i class="eg-icon-pencil"></i></span>',c+='<span id="button_reset_size_'+e+'" class="button_reset_size layer-short-tool revblue"><i class="eg-icon-resize-normal"></i></span>';break;case"group":l+='<span class="layer-short-tool revdarkgray layer-title-with-icon"><i class="fa-icon-object-group"></i>',c+='<span  class="layer-short-tool revdarkgray"></span>',c+='<span  class="layer-short-tool revdarkgray"></span>';break;case"row":l+='<span class="layer-short-tool revdarkgray layer-title-with-icon"><i class="rs-icon-layergroup_n"></i>',c+='<span  class="layer-short-tool revdarkgray"></span>',c+='<span  class="layer-short-tool revdarkgray"></span>';break;case"column":l+='<span class="layer-short-tool revdarkgray layer-title-with-icon"><i class="rs-icon-layercolumns_n"></i>',c+='<span  class="layer-short-tool revdarkgray"></span>',c+='<span  class="layer-short-tool revdarkgray"></span>',c+='<span  class="layer-short-tool revdarkgray"></span>',c+='<span  class="layer-short-tool revdarkgray"></span>';break;case"shape":l+='<span class="layer-short-tool revdarkgray layer-title-with-icon"><i class="rs-icon-layershape_n"></i>',c+='<span id="button_edit_shape_'+e+'" class="button_edit_shape layer-short-tool revblue"><i class="eg-icon-pencil"></i></span>',c+='<span  class="layer-short-tool revdarkgray"></span>';break;case"button":l+='<span class="layer-short-tool revdarkgray layer-title-with-icon"><i class="rs-icon-layerbutton_n"></i>',c+='<span id="button_edit_layer_'+e+'" class="button_edit_layer layer-short-tool revblue"><i class="eg-icon-pencil"></i></span>',c+='<span id="button_reset_size_'+e+'" class="button_reset_size layer-short-tool revblue"><i class="eg-icon-resize-normal"></i></span>';break;case"image":l+='<span class="layer-short-tool revdarkgray layer-title-with-icon"><i class="rs-icon-layerimage_n"></i>',c+='<span  id="button_change_image_source_'+e+'" class="button_change_image_source layer-short-tool revblue"><i class="eg-icon-pencil"></i></span>',c+='<span id="button_reset_size_'+e+'" class="button_reset_size layer-short-tool revblue"><i class="eg-icon-resize-normal"></i></span>';break;case"video":l+='<span class="layer-short-tool revdarkgray layer-title-with-icon"><i class="rs-icon-layervideo_n"></i>',c+='<span  id="button_change_video_settings_'+e+'" class="button_change_video_settings layer-short-tool revblue"><i class="eg-icon-pencil"></i></span>',c+='<span  class="layer-short-tool revdarkgray"></span>';break;case"audio":l+='<span class="layer-short-tool revdarkgray layer-title-with-icon"><i class="rs-icon-layeraudio_n"></i>',c+='<span  id="button_changeaudio_settings_'+e+'" class="button_change_audio_settings layer-short-tool revblue"><i class="eg-icon-pencil"></i></span>',c+='<span  class="layer-short-tool revdarkgray"></span>',r=" layer-sort-audio-item";break;case"svg":l+='<span class="layer-short-tool revdarkgray layer-title-with-icon"><i class="rs-icon-layersvg_n"></i>',c+='<span  id="button_changesvg_settings_'+e+'" class="button_change_svg_settings layer-short-tool revblue"><i class="eg-icon-pencil"></i></span>',c+='<span  class="layer-short-tool revdarkgray"></span>'}l+='<input type="text" class="layer-title-in-list" value="'+s+'"></span>',l+=c,"column"!==a.type&&(l+='<span id="button_delete_layer_'+e+'" class="button_delete_layer layer-short-tool revred"><i class="rs-lighttrash"></i></span>',l+='<span id="button_duplicate_layer_'+e+'" class="button_duplicate_layer layer-short-tool revyellow" data-isstatic=""><i class="rs-lightcopy"></i></span>'),l+='<span style="display:block;float:none;clear:both"></span></span>',l+='<span class="quick-layer-view layer-short-tool revdarkgray in-on"><i class="eg-icon-eye"></i></span>',l+='<span class="quick-layer-lock layer-short-tool revdarkgray"><i class="eg-icon-lock-open"></i></span>',l+='<div style="clear:both;display:block"></div>',l+="</li>",document.getElementById("quick-layers-list-id").childNodes.length>1&&(document.getElementById("nolayersavailable").style.display="none");var m="",p="logical_o"===a.grouptype?" hide_timeline":"";m+='<li data-uniqueid="'+a.unique_id+'" data-serial="'+e+'" id="layer_sort_time_'+e+'" class="sortable_elements mastertimer-layer ui-state-default'+r+p+'" data-grouptype="'+a.grouptype+'" data-pid="'+a.p_uid+'">',m+='        <div class="timeline_full"></div>',m+='  <div class="timeline">',m+='      <div class="timeline-relative-marker trm-groupandrowmarker"></div>',m+='        <div data-frameindex="0" id="tl_'+a.unique_id+'_frame_0" class="timeline_frame tf_startframe tl_layer_frame" data-uniqueid="'+a.unique_id+'" data-serial="'+e+'" style="z-index:50;">',m+='             <span class="timebefore_cont"></span>',m+='            <div class="tl_speed_wrapper">',m+='                <div class="tlf_speed"><span class="duration_cont"></span></div>',m+='                <div class="tlf_splitdelay"></div>',m+="            </div>",m+='            <span class="show_timeline_helper">EDIT</span>',m+="        </div>",m+='        <div data-frameindex="999" id="tl_'+a.unique_id+'_frame_999" class="timeline_frame tf_endframe tl_layer_frame" data-uniqueid="'+a.unique_id+'" data-serial="'+e+'" style="z-index:48;">',m+='             <span class="timebefore_cont"></span>',m+='            <div class="tl_speed_wrapper">',m+='                <div class="tlf_speed"><span class="duration_cont"></span></div>',m+='                <div class="tlf_splitdelay"></div>',m+="            </div>",m+='            <span class="show_timeline_helper">EDIT</span>',m+="        </div>",m+=" </div>",m+=' <div class="slide-idle-section"></div>',m+="</li>";var f=!0;"row"===a.type&&document.getElementById("layers-left-ul").getElementsByClassName("sortable_row").length>0&&(f=!1,document.getElementById("layers-left-ul").getElementsByClassName("sortable_row")[0].insertAdjacentHTML("afterend",n),document.getElementById("quick-layers-list-id").getElementsByClassName("quick_in_row")[0].insertAdjacentHTML("afterend",l),document.getElementById("layers-right-ul").getElementsByClassName("sortable_row")[0].insertAdjacentHTML("afterend",m)),f&&(document.getElementById("layers-left-ul").insertAdjacentHTML("beforeend",n),document.getElementById("quick-layers-list-id").insertAdjacentHTML("beforeend",l),document.getElementById("layers-right-ul").insertAdjacentHTML("beforeend",m)),jQuery("#layer_quicksort_"+e).on("mouseenter",function(e){jQuery(".layer_due_list_element_selected").removeClass("layer_due_list_element_selected"),jQuery("#slide_layer_"+jQuery(this).data("serial")).addClass("layer_due_list_element_selected")}),jQuery("#layer_quicksort_"+e).on("mouseleave",function(e){jQuery(".layer_due_list_element_selected").removeClass("layer_due_list_element_selected")}),jQuery("#layers-left .tipsy_enabled_top").tipsy({gravity:"s",delayIn:70}),reinitSortBox();var y=document.getElementById("layer_sort_time_"+e),h=jQuery(y),g=y.getElementsByClassName("timeline")[0];jQuery(g);a.references.sorttable=void 0===a.references.sorttable?{}:a.references.sorttable,a.references.sorttable.layer=jQuery(document.getElementById("layer_sort_"+e)),a.references.sorttable.timeline=h,a.references.quicklayer=jQuery(document.getElementById("layer_quicksort_"+e)),"audio"==a.type&&(h.data("objref",a),t.drawAudioMap(a),h.on("mousemove",function(e){try{var t=jQuery(this),a=t.data("objref"),r=t.data("serial"),i=jQuery("#slide_layer_"+r+" audio")[0];if(!t.hasClass("ui-state-hover"))return!1;clearTimeout(t.data("audiopreview")),t.find(".audio-progress").remove(),i.pause(),t.data("audiopreview",setTimeout(function(){var r=t.find(".timeline_full"),s=r.position().left,o=r.width(),n=e.pageX-t.offset().left,l=n-s;if(!(n<s||n>s+o)){t.find(".audio-progress").remove(),t.append('<div class="audio-progress"></div>');var d=t.find(".audio-progress"),u=getStartSec(a.video_data.start_at),c=getStartSec(a.video_data.end_at);u=-1==u?0:u,c=-1==c?999999999:c,u/=60;var m=(c=(c/=60)>i.duration?i.duration:c)-u,p=Math.floor(l/(100*m));l>100*m&&(l-=100*m*p),l>0&&(restw=100*(m-l/100),punchgs.TweenLite.fromTo(d,m-l/100,{left:s+l+p*(100*m),transformOrigin:"0% 50%",width:restw,scaleX:0},{scale:1,ease:punchgs.Linear.easeNone,onUpdate:function(){},onComplete:function(){i.pause()}})),l>0&&(i.play(),i.currentTime=l/100)}},400))}catch(e){}}),h.on("mouseleave",function(e){try{var t=jQuery(this),a=t.data("serial"),r=jQuery("#slide_layer_"+a+" audio")[0];clearTimeout(t.data("audiopreview")),t.find(".audio-progress").remove(),r.pause()}catch(e){}}));for(var v=y.getElementsByClassName("timeline_frame"),_=0;_<v.length;_++)jQuery(v[_]).resizable({handles:"e,w",minWidth:1,create:function(e,a){var r=this;t.setTLFrame(r),setTimeout(function(){t.frameLimitations(r)},25)},start:function(e,a){t.deactivatePerfectScrollBars(),t.updateTLFrame(this,"trigger",void 0,a.size.width)},resize:function(e,a){t.updateTLFrame(this,"trigger",void 0,a.size.width)},stop:function(e,a){t.updateTLFrame(this,"trigger")}}),jQuery(v[_]).draggable({axis:"x",start:function(e,a){t.recordFrameStatus(this,a)},drag:function(e,a){t.frameLimitations(this,a),t.updateTLFrame(this,"trigger"),t.updateAllSelectedLayerTimeline(this)},stop:function(e,a){t.frameLimitations(this,a),t.updateTLFrame(this,"trigger"),t.updateAllSelectedLayerTimeline(this)}});t.resetTimeLineHeight(),t.setIdleZones()},t.deactivatePerfectScrollBars=function(){jQuery(".revolution-template-groups").perfectScrollbar("destroy")},t.activatePerfectScrollBars=function(){jQuery(".revolution-template-groups").perfectScrollbar()};var checkTillSlideEnd=function(e){var a=10*t.mainMaxTimeLeft,r=document.getElementById("layer_sort_"+e.serial);e.frames.frame_999.time>=a?(e.endWithSlide=!0,r.classList.contains("tillendon")||(r.className+=" tillendon")):(e.endWithSlide=!1,jQuery(r).removeClass("tillendon"))};t.setTLFrame=function(e){var a=e.getElementsByClassName("tlf_speed")[0],r=e.getElementsByClassName("tlf_splitdelay")[0],i=e.getElementsByClassName("duration_cont")[0],s=e.getElementsByClassName("timebefore_cont")[0],o=e.parentNode.parentNode.getElementsByClassName("timeline-relative-marker")[0],e=jQuery(e),n=u.getLayerByUniqueId(e.data("uniqueid")),l=u.checkLayerTriggered(n),d=u.getObjectLength(n.frames);n.frames.frame_0.time=Math.max(0,n.frames.frame_0.time),n.frames.frame_999.time=Math.min(10*t.mainMaxTimeLeft,n.frames.frame_999.time);var c=e.data("frameindex"),m=n.frames["frame_"+c].speed,p=n.frames["frame_"+c].time,f=getSplitCounts(n.text,n.frames["frame_"+c].split,n.frames["frame_"+c].splitdelay),y=p;if(n.frames["frame_"+c].split_extratime=f,0!==f?(punchgs.TweenLite.set(a,{width:m/10-f}),punchgs.TweenLite.set(r,{width:f})):(punchgs.TweenLite.set(a,{width:m/10}),punchgs.TweenLite.set(r,{width:0})),punchgs.TweenLite.set(e,{left:p/10,width:f+m/10}),i.innerHTML=m,void 0!==n.p_uid&&-1!==n.p_uid&&void 0!==u.getLayerByUniqueId(n.p_uid)&&"object"==typeof u.getLayerByUniqueId(n.p_uid)){var h=u.getLayerByUniqueId(n.p_uid);o.style.display="block",o.style.width=h.frames.frame_0.time/10-1+"px",y=p-h.frames.frame_0.time}else if(o.style.display="none",o.style.width="0px",0!==c){var g=999===c?n.frames["frame_"+(d-2)]:n.frames["frame_"+(c-1)];void 0!==g&&(y=p-(g.time+g.speed+10*g.split_extratime))}p==10*t.mainMaxTimeLeft&&(s.innerHTML='<span class="wait_slide_end">WAIT</span>'),n.frames["frame_"+c].time_relative=y,0==c&&l.in&&(s.innerHTML='<span class="triggered_layer_on_timeline">a</span>'),999==c&&l.out&&(s.innerHTML='<span class="triggered_layer_on_timeline">a</span>'),t.updateFullTime(n),checkTillSlideEnd(n)},t.updateTLFrame=function(e,a,r,i){t.recordFrameStatusForce&&t.recordFrameStatus(e);var s=u.getCurrentLayer().serial,o=e.getElementsByClassName("tlf_speed")[0],n=e.getElementsByClassName("tlf_splitdelay")[0],l=e.getElementsByClassName("duration_cont")[0],d=e.getElementsByClassName("timebefore_cont")[0],c=e.parentNode.parentNode.getElementsByClassName("timeline-relative-marker")[0],e=jQuery(e),m=u.getLayerByUniqueId(e.data("uniqueid")),p={frames:{}},f=u.getObjectLength(m.frames),y=u.checkLayerTriggered(m);if(fi=e.data("frameindex"),speed=10*e.outerWidth(),time=10*e.position().left,splitdelay=getSplitCounts(m.text,m.frames["frame_"+fi].split,m.frames["frame_"+fi].splitdelay),currentframe=m.frames["frame_"+fi],updateTimerText=!0,timedif=time,p.frames["frame_"+fi]={},speed-10*splitdelay<0&&(speed=10*splitdelay,punchgs.TweenLite.set(e,{width:splitdelay})),0!==splitdelay?(punchgs.TweenLite.set(o,{width:speed/10-splitdelay}),punchgs.TweenLite.set(n,{width:splitdelay})):punchgs.TweenLite.set(o,{width:speed/10}),l.innerHTML=speed,(time==10*t.mainMaxTimeLeft||0==fi&&y.in||999==fi&&y.out)&&(updateTimerText=!1),void 0!==m.p_uid&&-1!==m.p_uid&&void 0!==u.getLayerByUniqueId(m.p_uid)&&"object"==typeof u.getLayerByUniqueId(m.p_uid)){var h=u.getLayerByUniqueId(m.p_uid);timedif=time-h.frames.frame_0.time,c.style.display="block"}else if(c.style.display="none",c.style.width="0px",0!==fi){var g=999===fi?m.frames["frame_"+(f-2)]:m.frames["frame_"+(fi-1)];g&&(timedif=time-(g.time+g.speed+10*g.split_extratime))}if(time==10*t.mainMaxTimeLeft&&(d.innerHTML='<span class="wait_slide_end">WAIT</span>'),0==fi&&y.in&&(d.innerHTML='<span class="triggered_layer_on_timeline">a</span>'),999==fi&&y.out&&(d.innerHTML='<span class="triggered_layer_on_timeline">a</span>'),currentframe.time_relative=timedif,p.frames["frame_"+fi].speed=speed-10*splitdelay,p.frames["frame_"+fi].time=time,p.frames["frame_"+fi].time_relative=timedif,p.frames["frame_"+fi].split_extratime=splitdelay,m.serial==s&&(0===fi&&(document.getElementById("layer_speed").value=p.frames.frame_0.speed),999===fi&&(document.getElementById("layer_endspeed").value=p.frames.frame_999.speed)),"trigger"!==a&&(currentframe.speed=p.frames["frame_"+fi].speed,currentframe.time=p.frames["frame_"+fi].time),0===fi&&("row"===m.type||"column"===m.type||"group"==m.type)){for(var v=u.getLayersInGroup(m.unique_id),_=0;_<v.columns.length;_++)(c=(b=v.columns[_].references.sorttable.timeline)[0].getElementsByClassName("timeline-relative-marker")[0]).style.width=time/10-1+"px";for(_=0;_<v.layers.length;_++){var b=v.layers[_].references.sorttable.timeline,c=b[0].getElementsByClassName("timeline-relative-marker")[0];if("row"===m.type){var w=document.getElementById("tl_"+v.layers[_].p_uid+"_frame_0");null!==w&&void 0!==w&&(c.style.width=w.style.left)}else c.style.width=time/10-1+"px"}}if(999!==fi){var k=fi+1>=f-1?999:fi+1,L=m.frames["frame_"+k];void 0!=L&&(L.time_relative=L.time-(currentframe.time+currentframe.speed+10*currentframe.split_extratime),p.frames["frame_"+k]={time_relative:L.time_relative})}"trigger"==a?u.updateLayer(m.serial,p):currentframe.split_extratime=p.frames["frame_"+fi].split_extratime,t.frameLimitations(e,!1,r,{update:updateTimerText,triggered:y,timecont:d}),t.updateFullTime(m),checkTillSlideEnd(m)},t.addLayersColumnsToSelectedElements=function(e,t){var a=u.getLayersInGroup(e.unique_id);if("row"===e.type||"column"==e.type||"group"===e.type){for(r=0;r<=a.layers.length-1;r++){i=a.layers[r].unique_id;if(-1==jQuery.inArray(i,u.selectedLayers)&&-1==jQuery.inArray(i,u.currentGroupElements)){s=document.getElementById("tl_"+i+"_frame_"+t);u.currentGroupElementsPositionLeftReset.push(parseInt(s.style.left,0)),u.currentGroupElements.push(i)}}if("row"===e.type)for(var r=0;r<=a.columns.length-1;r++){var i=a.columns[r].unique_id;if(-1==jQuery.inArray(i,u.selectedLayers)&&-1==jQuery.inArray(i,u.currentGroupElements)){var s=document.getElementById("tl_"+i+"_frame_"+t);u.currentGroupElementsPositionLeftReset.push(parseInt(s.style.left,0)),u.currentGroupElements.push(i)}}}return!0},t.recordFrameStatus=function(e,a){var r=(e=jQuery(e)).data("frameindex"),i=u.getLayerByUniqueId(e.data("uniqueid"));i.positionLeftReset=void 0!==a?a.position.left:e.position().left,u.selectedLayersPositionLeftReset=[],u.currentGroupElements=[],u.currentGroupElementsPositionLeftReset=[];for(var s=0;s<=u.selectedLayers.length-1;s++){var o=u.selectedLayers[s],n=-1!==o?u.getLayerByUniqueId(o):-1,l=document.getElementById("tl_"+o+"_frame_"+r);u.selectedLayersPositionLeftReset.push(parseInt(l.style.left,0)),-1!==n&&t.addLayersColumnsToSelectedElements(n,0)}t.addLayersColumnsToSelectedElements(i,0),t.recordFrameStatusForce=!1},t.frameLimitations=function(e,a,r,i){t.recordFrameStatusForce&&t.recordFrameStatus(e);var e=jQuery(e),s=u.getLayerByUniqueId(e.data("uniqueid")),o=e.prev(),n=e.next(),l=n.data("frameindex"),d=e.data("frameindex"),c=void 0!==a&&!1!==a?a.position.left:e.position().left,m=e.outerWidth(),p=u.getObjectLength(s.frames),f=s.frames["frame_"+d];if(o.length>0&&(c=Math.max(o.position().left+o.outerWidth(),c)),c=Math.max(0,c),n.length>0&&999!==d&&(c=Math.min(n.position().left-m,c)),c=Math.min(t.mainMaxTimeLeft,c),void 0!==i&&i.update){var y=0;if(void 0!==s.p_uid&&0===d&&-1!==s.p_uid&&void 0!==u.getLayerByUniqueId(s.p_uid)&&"object"==typeof u.getLayerByUniqueId(s.p_uid))y=10*c-u.getLayerByUniqueId(s.p_uid).frames.frame_0.time;else if(0!==d){var h=999===d?s.frames["frame_"+(p-2)]:s.frames["frame_"+(d-1)];h&&(y=10*c-(h.time+h.speed+10*h.split_extratime))}"absolute"===t.timelinetype?i.timecont.innerHTML=10*c:i.timecont.innerHTML=y}if(999!==d&&"absolute"!==t.timelinetype){var g=s.frames["frame_"+l];g.time_relative=g.time-(f.time+10*f.split_extratime+f.speed),n.find(".timebefore_cont").html(g.time_relative)}if(void 0!==a&&!1!==a&&(a.position.left=c),punchgs.TweenLite.set(e,{left:c}),u.selectedLayers.length>0&&!r||void 0!=u.currentGroupElements&&u.currentGroupElements.length>0&&!r){for(var v=c-s.positionLeftReset,_=0;_<=u.selectedLayers.length-1;_++)(b=u.selectedLayers[_])!=s.unique_id&&((w=document.getElementById("tl_"+b+"_frame_"+d)).style.left=u.selectedLayersPositionLeftReset[_]+v+"px",t.updateFullTime(u.getLayerByUniqueId(b),u.selectedLayersPositionLeftReset[_]+v));if(0===d&&void 0!==u.currentGroupElements&&u.currentGroupElements.length>0)for(_=0;_<=u.currentGroupElements.length-1;_++){var b=u.currentGroupElements[_];if(b!=s.unique_id){var w=document.getElementById("tl_"+b+"_frame_"+d);w.style.left=u.currentGroupElementsPositionLeftReset[_]+v+"px",t.updateFullTime(u.getLayerByUniqueId(b),u.currentGroupElementsPositionLeftReset[_]+v)}}}t.updateFullTime(s),checkTillSlideEnd(s)},t.updateFullTime=function(e,t){var a=e.references.sorttable.timeline[0].getElementsByClassName("timeline_full")[0],r=jQuery(e.references.sorttable.timeline[0]).find(".timeline_audio"),i=10*((t=void 0===t?15+e.frames.frame_0.time/10:t+15)-15);punchgs.TweenLite.set(a,{left:t,width:(e.frames.frame_999.time-i+e.frames.frame_999.split_extratime+e.frames.frame_999.speed)/10}),void 0!==r&&r.length>0&&punchgs.TweenLite.set(r,{left:t,width:(e.frames.frame_999.time-i+e.frames.frame_999.split_extratime+e.frames.frame_999.speed)/10})},t.updateLayerTimeline=function(e){for(var a=e.references.sorttable.timeline[0].getElementsByClassName("timeline_frame"),r=0;r<a.length;r++)t.setTLFrame(a[r]),t.updateTLFrame(a[r],!1,!0)},t.updateCurrentLayerTimeline=function(){for(var e=document.getElementById("layer_sort_time_"+u.getCurrentLayer().serial).getElementsByClassName("timeline_frame"),a=0;a<e.length;a++)t.setTLFrame(e[a],!1,!0)},t.updateAllLayerTimeline=function(){for(var e=document.getElementsByClassName("timeline_frame tl_layer_frame"),a=0;a<e.length;a++)t.updateTLFrame(e[a],!1,!0)},t.updateAllSelectedLayerTimeline=function(e){var a=(e=jQuery(e)).data("uniqueid"),r=e.data("frameindex");if(u.selectedLayers.length>0)for(i=0;i<=u.selectedLayers.length-1;i++)(s=u.selectedLayers[i])!=a&&t.updateTLFrame(document.getElementById("tl_"+s+"_frame_"+r),!1,!0);if(0===r&&void 0!==u.currentGroupElements&&u.currentGroupElements.length>0)for(var i=0;i<=u.currentGroupElements.length-1;i++){var s=u.currentGroupElements[i];s!=a&&t.updateTLFrame(document.getElementById("tl_"+s+"_frame_"+r),!1,!0)}},t.showTimeLineDirectInput=function(e){jQuery("#clayer_start_time").val(e.time),jQuery("#clayer_start_speed").val(e.speed)},t.manageTimeLineDirectInput=function(){jQuery("#clayer_start_time, #clayer_end_time").on("change blur",function(){var e=t.getLayer(selectedLayerSerial);e.time=jQuery("#clayer_start_time").val(),e.frames.frame_999.time=jQuery("#clayer_end_time").val(),e.speed=jQuery("#clayer_start_speed").val(),e.frames.frame_999.speed=jQuery("#clayer_end_speed").val(),jQuery("#layer_speed").val(e.speed),jQuery("#layer_endspeed").val(e.frames.frame_999.speed),t.updateLayerFromFields(),u.updateCurrentLayerTimeline()})};var msToSec=function(e){var t=Math.floor(e/1e3),a=t+".";return(e-=1e3*t)<100&&(a+="0"),a+=Math.round(e/10)},getSplitCounts=function(e,t,a){if(void 0==e)return 0;var r=new Object;switch(ht=jQuery("<div>"+e+"</div>"),w=1,r.c=ht.text().replace(/ /g,"").length,r.w=e.split(" ").length,r.l=e.split("<br").length,t){case"chars":w=r.c;break;case"words":w=r.w;break;case"lines":w=r.l}return(w-1)*a},showHideTimeines=function(){jQuery("#button_sort_timing").click(function(){var e=jQuery(this);e.hasClass("off")?(e.removeClass("off"),e.find(".onoff").html("- on"),punchgs.TweenLite.to(jQuery(".sortlist .timeline"),.5,{autoAlpha:.5,overwrite:"auto"})):(punchgs.TweenLite.to(jQuery(".sortlist .timeline"),.5,{autoAlpha:0,overwrite:"auto"}),e.addClass("off"),e.find(".onoff").html("- off"))})};t.deleteLayerFromSortbox=function(e){var a=t.getHtmlSortItemFromSerial(e),r=t.getHtmlSortTimeItemFromSerial(e),i=t.getHtmlQuickTimeItemFromSerial(e);try{a.remove(),r.remove(),i.remove()}catch(e){}jQuery(".quick-layers-list li").length<2&&jQuery(".nolayersavailable").show()},t.unselectSortboxItems=function(){jQuery(".sortlist li,#layers-right li, .quick-layers-list li").removeClass("ui-state-hover").addClass("ui-state-default")},t.organiseGroupsAndLayer=function(e,a,r){var i=a?u.arrLayersDemo:u.arrLayers,s=!1;for(var o in i)if(i.hasOwnProperty(o)){var n=i[o];if("group"!=n.type&&"row"!=n.type&&void 0!=n.p_uid&&-1!=n.p_uid){var l=a?null:n.references.sorttable.layer,d=u.getLayerByUniqueId(n.p_uid),c=!a&&d?d.references.sorttable.layer[0].getElementsByClassName("sgw_def")[0]:void 0,m=n.references.htmlLayer,p=d?d.references.htmlLayer:void 0;if(p&&m&&!p[0].contains(m[0])){var f=p[0].getElementsByClassName("tp_layer_group_inner_wrapper")[0];if(void 0!==f&&void 0!==m[0])if("column"!==n.type){var y,h=99999;for(var g in i)if(i.hasOwnProperty(g)){var v=i[g];n.p_uid===v.p_uid&&void 0!==v.references.htmlLayer&&void 0!==v.groupOrder&&v.groupOrder>n.groupOrder&&v.groupOrder<h&&(h=v.groupOrder,!1,y=v.references.htmlLayer)}void 0!==y&&h<99999&&y[0].parentNode==f?f.insertBefore(m[0],y[0]):f.appendChild(m[0])}else f.appendChild(m[0])}a||e||void 0===c||c.contains(l[0])||(s=!0,c.appendChild(l[0])),a||void 0!==c||"column"!==n.type||u.deleteLayer(n.serial)}else{n.p_uid=-1;var m=n.references.htmlLayer,l=a?null:n.references.sorttable.layer;if("row"===n.type){var _,b="row-zone-"+u.getVal(n,"align_vert"),w=99999,k=document.getElementById(b);for(var L in i)i.hasOwnProperty(L)&&"row"===(v=i[L]).type&&v.unique_id!==n.unique_id&&u.getVal(n,"align_vert")===u.getVal(v,"align_vert")&&void 0!==v.references.htmlLayer&&void 0!==v.groupOrder&&v.groupOrder>=n.groupOrder&&v.groupOrder<w&&(w=v.groupOrder,!1,_=v.references.htmlLayer);void 0!==_&&w<99999&&_[0].parentNode==k?k.insertBefore(m[0],_[0]):k.appendChild(m[0]),u.checkRowZoneContents()}else"divLayers"!=m[0].parentNode.id&&document.getElementById("divLayers").appendChild(m[0]);a||"layers-left-ul"==l[0].parentNode.id||(document.getElementById("layers-left-ul").insertBefore(l[0],document.getElementById("last_drop_zone_layers")),s=!0)}}u.setMiddleRowZone(),s&&t.updateOrderFromSortbox(r)},t.updateOrderFromSortbox=function(e){for(l in u.arrLayers)if(u.arrLayers.hasOwnProperty(l)&&"column"!=(d=u.arrLayers[l]).type&&"row"!=d.type&&"group"!=d.type){var a=d.references.sorttable.layer,r=a[0].parentNode.parentNode.classList.contains("sortable_column"),i=a[0].parentNode.parentNode.classList.contains("sortable_group"),s=-1;if(!r&&!i||"layers-left-ul"==a[0].parentNode.parentNode.id);else{var o=jQuery(a[0].parentNode.parentNode);r||(a.data("pid",o.data("uniqueid")),"row"===o.data("type")&&(0==(o=a.prev()).length&&(o=a.next()),o[0].getElementsByClassName("sortable_layers_in_columns")[0].appendChild(a[0]))),s=o.data("uniqueid")}a.data("pid",s),a.attr("pid",s),d.p_uid!=s&&(d.p_uid=s,u.add_layer_change())}for(var n=jQuery("#layers-left-ul").sortable("toArray",{attribute:"data-uniqueid"}),l=0;l<n.length;l++){var d=u.getLayerByUniqueId(n[l]),c=l+5;u.arrLayers[d.serial].order=l,u.arrLayers[d.serial].zIndex=c,d.references.sorttable.layer[0].getElementsByClassName("sortbox_depth")[0]&&(d.references.sorttable.layer[0].getElementsByClassName("sortbox_depth")[0].innerHTML=c),document.getElementById("layers-right-ul").appendChild(d.references.sorttable.timeline[0]),document.getElementById("quick-layers-list-id").appendChild(d.references.quicklayer[0]),-1!=d.p_uid&&void 0!==d.p_uid&&"row"!==d.type&&"group"!==d.type?d.references.quicklayer.addClass("quick_in_group"):d.references.quicklayer.removeClass("quick_in_group")}t.updateZIndexByOrder(),1!=e&&t.updateAllLayerTimeline()},t.resetTimeLineHeight=function(){var e=document.getElementById("layers-right-ul").clientHeight;punchgs.TweenLite.set(jQuery("#mastertimer-position"),{height:e+40})},t.timeLineTableDimensionUpdate=function(){clearTimeout(timeline_timer),timeline_timer=setTimeout(function(){t.resetTimeLineHeight();var e=30*(jQuery("#layers-right ul li").length+1)-30*(jQuery("#layers-right ul li.layer-deleted").length+1);punchgs.TweenLite.set(jQuery(".layers-wrapper"),{height:e+3}),punchgs.TweenLite.set(jQuery("#mastertimer-wrapper"),{height:e+3}),jQuery(".master-rightcell .layers-wrapper, .master-leftcell .layers-wrapper, #divLayers-wrapper, .quick-layers-list").perfectScrollbar("update")},50)},t.updateZIndexByOrder=function(){for(var e in u.arrLayers)if(u.arrLayers.hasOwnProperty(e)){var t=u.arrLayers[e],a={zIndex:void 0!==t.order?t.order+5:5};void 0!==t.order&&punchgs.TweenLite.set(t.references.htmlLayer,{zIndex:Number(t.order)+100}),u.updateLayer(t.serial,a,!1,!0)}};var shiftOrder=function(e){for(key in u.arrLayers)if(u.arrLayers.hasOwnProperty(key)){var t=u.arrLayers[key];t.order>=e&&(t.order=Number(t.order)+1,u.arrLayers[key]=t)}};t.getSortboxText=function(e){sorboxTextSize=20;var t=void 0===e?"NoText":UniteAdminRev.stripTags(e);return t.length<2&&(t=UniteAdminRev.htmlspecialchars(e)),t.length>sorboxTextSize&&(t=t.slice(0,sorboxTextSize)+"..."),t},t.redrawSortbox=function(e){void 0==e&&(e=sortMode),emptySortbox();var a=getLayersSorted("depth");if(0==a.length)return!1;for(var r=0;r<a.length;r++){var i=a[r];t.addToSortbox(i.serial,i)}-1!=u.selectedLayerSerial&&t.setSortboxItemSelected(u.selectedLayerSerial)};var reinitSortBox=function(e){jQuery("#last_drop_zone_layers").appendTo("#layers-left-ul"),e&&jQuery(".layer_sortbox ul").sortable({refreshPositions:!0,placeholder:"silent-placeholder",cancel:"#slide_in_sort, input",handle:".mastertimer-timeline-zindex-row",items:".sortable_elements",connectWith:"#layers-left-ul, .sortable_groups_wrap, .sortable_layers_in_columns",update:function(e,a){var r=jQuery(a.item);r.hasClass("sortable_row")&&jQuery(this).sortable("cancel");var i=r.parent(),s=i.closest(".sortable_group"),o=jQuery("#layers-left-ul");if(!i.hasClass("sortable_groups_wrap")&&!i.hasClass("sortable_layers_in_columns")||r.hasClass("sortable_layers")||(r.index()<i.children().length/2?r.insertBefore(s):r.insertAfter(s)),"layers-left-ul"===i.attr("id")||"layers-left-ul"===i.parent().attr("id")||r.hasClass("sortable_group")){var n=o.find(".sortable_row"),l=n.first().index(),d=n.last().index(),u=r.index();u>l&&u<d&&r.insertAfter(n.last())}onSortboxSorted(),t.organiseGroupsAndLayer()}}),jQuery(".droppable_sortable_group,.droppable_sortable_row, .droppable_sortable_column").droppable({tolerance:"intersect",greedy:!0,over:function(e){jQuery(e.target).addClass("readytodrop")},out:function(e){jQuery(e.target).removeClass("readytodrop")},drop:function(e,a){jQuery("#layers-left-ul");jQuery(e.target).removeClass("readytodrop");var r,i=jQuery(e.target).attr("class"),s=jQuery(e.srcElement).closest(".sortable_elements.sortable_layers");if(!s.length)return!1;i.indexOf("droppable_sortable_group")>=0&&(r=jQuery(e.target).closest("li.sortable_group").find(".sortable_groups_wrap")),i.indexOf("droppable_sortable_row")>=0&&(r=jQuery(e.target).closest("li.sortable_group.sortable_row").find(".sortable_layers_in_columns").first()),i.indexOf("droppable_sortable_column")>=0&&(r=jQuery(e.target).closest("li.sortable_column").find(".sortable_layers_in_columns").first()),setTimeout(function(){s.appendTo(r),onSortboxSorted(),t.organiseGroupsAndLayer()},50)}})},initSortbox=function(){t.redrawSortbox(),reinitSortBox(!0),jQuery("body").delegate(".layer_sort_inner_wrapper","mousedown",function(e){var t=jQuery(this).closest(".sortable_elements");if(t.hasClass("ui-state-hover"))return!0;if(!t.hasClass("mastertimer-slide")){var a=u.getSerialFromSortID(t.attr("id"));return u.setLayerSelected(a),!1}}),jQuery("body").on("click",".sort_group_collapser",function(e){var t=jQuery(this),a=t.closest(".sortable_column"),r=a.length?a:t.closest(".sortable_group"),i=a.length?r.find(".sortable_layers_in_columns"):r.find(".sortable_groups_wrap");t.toggleClass("collapsed"),t.hasClass("collapsed")?i.css({maxHeight:"0px",overflow:"hidden"}):i.css({maxHeight:"none",overflow:"visible"}),i.find(".sortable_elements").each(function(e,a){var r=(a=jQuery(a)).data("uniqueid");t.hasClass("collapsed")?jQuery('#layers-right-ul li[data-uniqueid="'+r+'"]').addClass("unvisibletimeline"):jQuery('#layers-right-ul li[data-uniqueid="'+r+'"]').removeClass("unvisibletimeline")})}),jQuery("#layers-right").delegate("li","mousedown",function(e){var a=jQuery(this);if(t.recordFrameStatusForce=!0,a.hasClass("ui-state-hover"))return!0;if(!a.hasClass("mastertimer-slide")){var r=u.getSerialFromSortID(this.id);return u.setLayerSelected(r),!1}}),jQuery(".quick-layer-all-lock").click(function(){var e=jQuery(this).find("i");e.hasClass("eg-icon-lock")?(jQuery(".quick-layer-lock i").each(function(){jQuery(this).removeClass("eg-icon-lock-open").addClass("eg-icon-lock")}),e.addClass("eg-icon-lock-open").removeClass("eg-icon-lock"),u.lockAllLayers()):(jQuery(".quick-layer-lock i").each(function(){jQuery(this).removeClass("eg-icon-lock").addClass("eg-icon-lock-open")}),e.removeClass("eg-icon-lock-open").addClass("eg-icon-lock"),u.unlockAllLayers())}),jQuery(".quick-layer-all-view").click(function(){var e=jQuery(this).find("i");e.hasClass("eg-icon-eye")?(jQuery(".quick-layer-view i").each(function(){jQuery(this).addClass("eg-icon-eye").removeClass("eg-icon-eye-off")}),e.removeClass("eg-icon-eye").addClass("eg-icon-eye-off"),u.showAllLayers()):(jQuery(".quick-layer-view i").each(function(){jQuery(this).removeClass("eg-icon-eye").addClass("eg-icon-eye-off")}),e.addClass("eg-icon-eye").removeClass("eg-icon-eye-off"),u.hideAllLayers())}),jQuery(".sortlist").delegate(".till_slideend","mousedown",function(e){var a=jQuery(this),r=a.closest("li"),i=a.data("serial"),s=u.getLayer(i),o=10*t.mainMaxTimeLeft;r.hasClass("tillendon")?(r.removeClass("tillendon"),s.frames.frame_999.time=s.frames.frame_999.time-200,t.updateLayerTimeline(s)):(r.addClass("tillendon"),s.frames.frame_999.time=o,t.updateLayerTimeline(s))})},getLayersSorted=function(e){void 0==e&&(e="time");var t=[];for(key in u.arrLayers)if(u.arrLayers.hasOwnProperty(key)){var a=u.arrLayers[key];a.serial=key,t.push(a)}return 0==t.length?t:(t.sort(function(t,a){switch(e){case"time":if(Number(t.time)==Number(a.time))return t.order==a.order?0:t.order>a.order?1:-1;if(Number(t.time)>Number(a.time))return 1;break;case"depth":if(t.order==a.order)return 0;if(t.order>a.order)return 1;break;default:trace("wrong sort type: "+e)}return-1}),t)};t.hideLayer=function(e,a){if(void 0!==e.references&&void 0!==e.references.htmlLayer){var r=e.references.htmlLayer;r.css({visibility:"hidden"}),r.addClass("currently_not_visible"),e.isDemo||setSortboxItemHidden(e.serial),1!=a&&t.isAllLayersHidden()&&jQuery("#button_sort_visibility").addClass("e-disabled")}},t.showLayer=function(e,t){if(void 0!==e.references&&void 0!==e.references.htmlLayer){var a=e.references.htmlLayer;a.css({visibility:"visible"}),a.removeClass("currently_not_visible"),e.isDemo||setSortboxItemVisible(e.serial),1!=t&&jQuery("#button_sort_visibility").removeClass("e-disabled")}},t.isLayerVisible=function(e){var t=!0;return void 0!=e&&e[0].classList.contains("currently_not_visible")&&(t=!1),t},t.isAllLayersHidden=function(){var e=0;for(serial in u.arrLayers)if(u.arrLayers.hasOwnProperty(serial)){if(void 0!==u.arrLayers[e]&&1==t.isLayerVisible(u.arrLayers[e].references.htmlLayer))return!1;e++}return!0},t.isLayerLocked=function(e){return e.hasClass("layer_on_lock")},t.lockLayer=function(e){setSortboxItemLocked(e),u.getHtmlLayerFromSerial(e).addClass("layer_on_lock")},t.unlockLayer=function(e){setSortboxItemUnlocked(e),u.getHtmlLayerFromSerial(e).removeClass("layer_on_lock")},t.setSortboxItemSelected=function(e){var a=t.getHtmlSortItemFromSerial(e),r=t.getHtmlSortTimeItemFromSerial(e),i=t.getHtmlQuickTimeItemFromSerial(e);t.unselectSortboxItems(),a&&a.removeClass("ui-state-default").addClass("ui-state-hover"),r&&r.removeClass("ui-state-default").addClass("ui-state-hover"),i&&i.removeClass("ui-state-default").addClass("ui-state-hover")};var setSortboxItemHidden=function(e){var a=t.getHtmlSortItemFromSerial(e),r=t.getHtmlSortTimeItemFromSerial(e),i=t.getHtmlQuickTimeItemFromSerial(e);a&&a.addClass("sortitem-hidden"),r&&r.addClass("sortitem-hidden"),i&&(i.addClass("sortitem-hidden"),i.find(".eg-icon-eye").addClass("eg-icon-eye-off").removeClass("eg-icon-eye"),i.find(".quick-layer-view").addClass("in-off"))},setSortboxItemVisible=function(e){var a=t.getHtmlSortItemFromSerial(e),r=t.getHtmlSortTimeItemFromSerial(e),i=t.getHtmlQuickTimeItemFromSerial(e);a&&a.removeClass("sortitem-hidden"),r&&r.removeClass("sortitem-hidden"),i&&i.removeClass("sortitem-hidden")},setSortboxItemLocked=function(e){var a=t.getHtmlSortItemFromSerial(e),r=t.getHtmlSortTimeItemFromSerial(e),i=t.getHtmlQuickTimeItemFromSerial(e);a&&a.addClass("sortitem-locked"),r&&r.addClass("sortitem-locked"),i&&i.addClass("sortitem-locked")},setSortboxItemUnlocked=function(e){var a=t.getHtmlSortItemFromSerial(e),r=t.getHtmlSortTimeItemFromSerial(e),i=t.getHtmlQuickTimeItemFromSerial(e);a&&a.removeClass("sortitem-locked"),r&&r.removeClass("sortitem-locked"),i&&i.removeClass("sortitem-locked")};t.getHtmlSortItemFromSerial=function(e){var t=jQuery("#layer_sort_"+e);return 0==t.length?(UniteAdminRev.showErrorMessage("Html sort field with serial: "+e+" not found!"),!1):t},t.getHtmlSortTimeItemFromSerial=function(e){var t=jQuery("#layer_sort_time_"+e);return 0==t.length?(UniteAdminRev.showErrorMessage("Html sort field with serial: "+e+" not found!"),!1):t},t.getHtmlQuickTimeItemFromSerial=function(e){var t=jQuery("#layer_quicksort_"+e);return 0==t.length?(UniteAdminRev.showErrorMessage("Html sort field with serial: "+e+" not found!"),!1):t};var emptySortbox=function(){jQuery(".sortlist ul").find(".sortable_elements").remove(),jQuery("#layers-right ul").find(".sortable_elements").remove()},onSortboxSorted=function(){t.updateOrderFromSortbox()},prepareOneSlide=function(e,t,a,r,i,s){var o=e,n=(o.find(".defaultimg"),o.data("zoomstart"),o.data("rotationstart"),o.find(".defaultimg").css("backgroundImage")),l=o.find(".defaultimg").css("backgroundColor"),d=0,u=o.find(".defaultimg").css("backgroundSize"),c=o.find(".defaultimg").css("backgroundRepeat"),m=o.find(".defaultimg").css("backgroundPosition");n=(n=n.replace('"',"")).replace('"',""),void 0==u&&(u="cover"),void 0==c&&(c="no-repeat"),void 0==m&&(m="center center");var i=void 0!=i?i:jQuery("#divbgholder").width(),s=void 0!=s?s:jQuery("#divbgholder").height();t.slotw=Math.ceil(i/t.slots),t.sloth=Math.ceil(s/t.slots);var p=0,f=0,y=0;p=t.sloth>t.slotw?t.sloth:t.slotw,t.slotw=p,t.sloth=p;var f=0,y=0;switch(r){case"box":for(var h=0;h<t.slots;h++){y=0;for(g=0;g<t.slots;g++)o.append('<div class="slot" style="position:absolute;top:'+(0+y)+"px;left:"+(0+f)+"px;width:"+p+"px;height:"+p+'px;overflow:hidden;"><div class="slotslide" data-x="'+f+'" data-y="'+y+'" style="position:absolute;top:0px;left:0px;width:'+p+"px;height:"+p+'px;overflow:hidden;"><div class="slotslidebg" style="position:absolute;top:'+(0-y)+"px;left:"+(0-f)+"px;width:"+i+"px;height:"+s+"px;background-color:"+l+";background-image:"+n+";background-repeat:"+c+";background-size:"+u+";background-position:"+m+';"></div></div></div>'),y+=p;f+=p}break;case"vertical":case"horizontal":if("horizontal"==r){if(!a)d=0-t.slotw;for(g=0;g<t.slots;g++)o.append('<div class="slot" style="position:absolute;top:0px;left:'+(0+g*t.slotw)+"px;overflow:hidden;width:"+(t.slotw+.6)+"px;height:"+s+'px"><div class="slotslide" style="position:absolute;top:0px;left:'+d+"px;width:"+(t.slotw+.6)+"px;height:"+s+'px;overflow:hidden;"><div class="slotslidebg" style="background-color:'+l+";position:absolute;top:0px;left:"+(0-g*t.slotw)+"px;width:"+i+"px;height:"+s+"px;background-image:"+n+";background-repeat:"+c+";background-size:"+u+";background-position:"+m+';"></div></div></div>')}else{if(!a)d=0-t.sloth;for(var g=0;g<t.slots+2;g++)o.append('<div class="slot" style="position:absolute;top:'+(0+g*t.sloth)+"px;left:0px;overflow:hidden;width:"+i+"px;height:"+t.sloth+'px"><div class="slotslide" style="position:absolute;top:'+d+"px;left:0px;width:"+i+"px;height:"+t.sloth+'px;overflow:hidden;"><div class="slotslidebg" style="background-color:'+l+";position:absolute;top:"+(0-g*t.sloth)+"px;left:0px;width:"+i+"px;height:"+s+"px;background-image:"+n+";background-repeat:"+c+";background-size:"+u+";background-position:"+m+';"></div></div></div>')}}},slideAnimation=function(e,t,a,r,i){if(void 0!=e){var s=e,o=t,n=new Object;(l=new Object).width=e.width(),l.height=e.height()}else{var e=s=jQuery("#divbgholder").find(".slotholder"),t=o=jQuery("#divbgholder").find(".oldslotholder"),n=new Object,a=jQuery("#fake-select-label").data("valu"),l=new Object;l.width=jQuery("#divbgholder").width(),l.height=jQuery("#divbgholder").height()}"slidingoverlayvertical"==a&&(a="slidingoverlayup"),"slidingoverlayhorizontal"==a&&(a="slidingoverlayleft"),"slideoverhorizontal"==a&&(a="slideoverleft"),"slideoververtical"==a&&(a="slideoverup"),"slideremovehorizontal"==a&&(a="slideremoveleft"),"slideremovevertical"==a&&(a="slideremoveup"),"slidehorizontal"==a&&(a="slideleft"),"slidevertical"==a&&(a="slideup"),"parallaxhorizontal"==a&&(a="parallaxtoleft"),"parallaxvertical"==a&&(a="parallaxtotop");var d=punchgs.Power1.easeIn,u=punchgs.Power1.easeOut,c=punchgs.Power1.easeInOut,m=punchgs.Power2.easeIn,p=punchgs.Power2.easeOut,f=punchgs.Power2.easeInOut,y=(punchgs.Power3.easeIn,punchgs.Power3.easeOut),h=punchgs.Power3.easeInOut,g=0,v=1,_=0,b=0,w=new Array,k=[["boxslide",0,1,10,0,"box",!1,null,0,u,u,500,6],["boxfade",1,0,10,0,"box",!1,null,1,c,c,700,5],["slotslide-horizontal",2,0,0,200,"horizontal",!0,!1,2,f,f,700,3],["slotslide-vertical",3,0,0,200,"vertical",!0,!1,3,f,f,700,3],["curtain-1",4,3,0,0,"horizontal",!0,!0,4,u,u,300,5],["curtain-2",5,3,0,0,"horizontal",!0,!0,5,u,u,300,5],["curtain-3",6,3,25,0,"horizontal",!0,!0,6,u,u,300,5],["slotzoom-horizontal",7,0,0,400,"horizontal",!0,!0,7,u,u,300,7],["slotzoom-vertical",8,0,0,0,"vertical",!0,!0,8,p,p,500,8],["slotfade-horizontal",9,0,0,500,"horizontal",!0,null,9,p,p,500,25],["slotfade-vertical",10,0,0,500,"vertical",!0,null,10,p,p,500,25],["fade",11,0,1,300,"horizontal",!0,null,11,f,f,1e3,1],["crossfade",11,1,1,300,"horizontal",!0,null,11,f,f,1e3,1],["fadethroughdark",11,2,1,300,"horizontal",!0,null,11,f,f,1e3,1],["fadethroughlight",11,3,1,300,"horizontal",!0,null,11,f,f,1e3,1],["fadethroughtransparent",11,4,1,300,"horizontal",!0,null,11,f,f,1e3,1],["slideleft",12,0,1,0,"horizontal",!0,!0,12,h,h,1e3,1],["slideup",13,0,1,0,"horizontal",!0,!0,13,h,h,1e3,1],["slidedown",14,0,1,0,"horizontal",!0,!0,14,h,h,1e3,1],["slideright",15,0,1,0,"horizontal",!0,!0,15,h,h,1e3,1],["slideoverleft",12,7,1,0,"horizontal",!0,!0,12,h,h,1e3,1],["slideoverup",13,7,1,0,"horizontal",!0,!0,13,h,h,1e3,1],["slideoverdown",14,7,1,0,"horizontal",!0,!0,14,h,h,1e3,1],["slideoverright",15,7,1,0,"horizontal",!0,!0,15,h,h,1e3,1],["slideremoveleft",12,8,1,0,"horizontal",!0,!0,12,h,h,1e3,1],["slideremoveup",13,8,1,0,"horizontal",!0,!0,13,h,h,1e3,1],["slideremovedown",14,8,1,0,"horizontal",!0,!0,14,h,h,1e3,1],["slideremoveright",15,8,1,0,"horizontal",!0,!0,15,h,h,1e3,1],["papercut",16,0,0,600,"",null,null,16,h,h,1e3,2],["3dcurtain-horizontal",17,0,20,100,"vertical",!1,!0,17,c,c,500,7],["3dcurtain-vertical",18,0,10,100,"horizontal",!1,!0,18,c,c,500,5],["cubic",19,0,20,600,"horizontal",!1,!0,19,h,h,500,1],["cube",19,0,20,600,"horizontal",!1,!0,20,h,h,500,1],["flyin",20,0,4,600,"vertical",!1,!0,21,y,h,500,1],["turnoff",21,0,1,500,"horizontal",!1,!0,22,h,h,500,1],["incube",22,0,20,200,"horizontal",!1,!0,23,f,f,500,1],["cubic-horizontal",23,0,20,500,"vertical",!1,!0,24,p,p,500,1],["cube-horizontal",23,0,20,500,"vertical",!1,!0,25,p,p,500,1],["incube-horizontal",24,0,20,500,"vertical",!1,!0,26,f,f,500,1],["turnoff-vertical",25,0,1,200,"horizontal",!1,!0,27,f,f,500,1],["fadefromright",12,1,1,0,"horizontal",!0,!0,28,f,f,1e3,1],["fadefromleft",15,1,1,0,"horizontal",!0,!0,29,f,f,1e3,1],["fadefromtop",14,1,1,0,"horizontal",!0,!0,30,f,f,1e3,1],["fadefrombottom",13,1,1,0,"horizontal",!0,!0,31,f,f,1e3,1],["fadetoleftfadefromright",12,2,1,0,"horizontal",!0,!0,32,f,f,1e3,1],["fadetorightfadefromleft",15,2,1,0,"horizontal",!0,!0,33,f,f,1e3,1],["fadetobottomfadefromtop",14,2,1,0,"horizontal",!0,!0,34,f,f,1e3,1],["fadetotopfadefrombottom",13,2,1,0,"horizontal",!0,!0,35,f,f,1e3,1],["parallaxtoright",12,3,1,0,"horizontal",!0,!0,36,f,m,1500,1],["parallaxtoleft",15,3,1,0,"horizontal",!0,!0,37,f,m,1500,1],["parallaxtotop",14,3,1,0,"horizontal",!0,!0,38,f,d,1500,1],["parallaxtobottom",13,3,1,0,"horizontal",!0,!0,39,f,d,1500,1],["scaledownfromright",12,4,1,0,"horizontal",!0,!0,40,f,m,1e3,1],["scaledownfromleft",15,4,1,0,"horizontal",!0,!0,41,f,m,1e3,1],["scaledownfromtop",14,4,1,0,"horizontal",!0,!0,42,f,m,1e3,1],["scaledownfrombottom",13,4,1,0,"horizontal",!0,!0,43,f,m,1e3,1],["zoomout",13,5,1,0,"horizontal",!0,!0,44,f,m,1e3,1],["zoomin",13,6,1,0,"horizontal",!0,!0,45,f,m,1e3,1],["slidingoverlayup",27,0,1,0,"horizontal",!0,!0,47,c,u,2e3,1],["slidingoverlaydown",28,0,1,0,"horizontal",!0,!0,48,c,u,2e3,1],["slidingoverlayright",30,0,1,0,"horizontal",!0,!0,49,c,u,2e3,1],["slidingoverlayleft",29,0,1,0,"horizontal",!0,!0,50,c,u,2e3,1],["notransition",26,0,1,0,"horizontal",!0,null,46,f,m,1e3,1]];"random-selected"!=a&&"random"!=a&&"random-static"!=a&&"random-premium"!=a||(a=11),function(){k&&jQuery.each(k,function(e,t){t[0]!=a&&t[8]!=a||(g=t[1],v=t[2],_=b),b+=1})}();var L=jQuery("#transition_duration").val();g>30&&(g=30),g<0&&(g=0),w=k[_];var x=new punchgs.TimelineLite;x.add(punchgs.TweenLite.set(e.find(".defaultimg"),{autoAlpha:0})),x.pause(),x.add(punchgs.TweenLite.set(t,{autoAlpha:1,force3D:"auto",zIndex:0}),0),x.add(punchgs.TweenLite.set(e,{autoAlpha:1,force3D:"auto",zIndex:1}),0),l.slots=jQuery("#slot_amount").val(),l.rotate=jQuery("#transition_rotation").val(),L="default"===L?w[11]:"random"===L?Math.round(1e3*Math.random()+300):void 0!=L?parseInt(L,0):w[11],L=L>l.delay?l.delay:L,L+=w[4],l.slots=void 0==l.slots||"default"==l.slots?w[12]:"random"==l.slots?Math.round(12*Math.random()+4):w[12],l.slots=l.slots<1?"boxslide"==a?Math.round(6*Math.random()+3):"flyin"==a?Math.round(4*Math.random()+1):l.slots:l.slots,l.slots=(4==g||5==g||6==g)&&l.slots<3?3:l.slots,l.slots=0!=w[3]?Math.min(l.slots,w[3]):l.slots,l.slots=9==g?l.width/20:10==g?l.height/20:l.slots,l.rotate=void 0==l.rotate||"default"==l.rotate?0:999==l.rotate||"random"==l.rotate?Math.round(360*Math.random()):l.rotate,l.rotate=!jQuery.support.transition||l.ie||l.ie9?0:l.rotate,l.slotw=Math.ceil(l.width/jQuery("#slot_amount").val()),l.sloth=Math.ceil(l.height/jQuery("#slot_amount").val()),null!=w[7]&&prepareOneSlide(t,l,w[7],w[5],l.width,l.height),null!=w[6]&&prepareOneSlide(e,l,w[6],w[5],l.width,l.height);var j=jQuery("select[name=transition_ease_in]").val(),T=jQuery("select[name=transition_ease_out]").val();if(j="default"===j?w[9]||punchgs.Power2.easeInOut:j||w[9]||punchgs.Power2.easeInOut,T="default"===T?w[10]||punchgs.Power2.easeInOut:T||w[10]||punchgs.Power2.easeInOut,0==g){var Q=Math.ceil(l.height/l.sloth),I=0;e.find(".slotslide").each(function(e){var t=jQuery(this);(I+=1)==Q&&(I=0),x.add(punchgs.TweenLite.from(t,L/600,{opacity:0,top:0-l.sloth,left:0-l.slotw,rotation:l.rotate,force3D:"auto",ease:j}),(15*e+30*I)/1500)})}if(1==g){var C,A=0;e.find(".slotslide").each(function(e){var t=jQuery(this),a=Math.random()*L+300,r=500*Math.random()+200;a+r>C&&(C=r+r,A=e),x.add(punchgs.TweenLite.from(t,a/1e3,{autoAlpha:0,force3D:"auto",rotation:l.rotate,ease:j}),r/1e3)})}if(2==g){z=new punchgs.TimelineLite;t.find(".slotslide").each(function(){var e=jQuery(this);z.add(punchgs.TweenLite.to(e,L/1e3,{left:l.slotw,ease:j,force3D:"auto",rotation:0-l.rotate}),0),x.add(z,0)}),e.find(".slotslide").each(function(){var e=jQuery(this);z.add(punchgs.TweenLite.from(e,L/1e3,{left:0-l.slotw,ease:j,force3D:"auto",rotation:l.rotate}),0),x.add(z,0)})}if(3==g){z=new punchgs.TimelineLite;t.find(".slotslide").each(function(){var e=jQuery(this);z.add(punchgs.TweenLite.to(e,L/1e3,{top:l.sloth,ease:j,rotation:l.rotate,force3D:"auto",transformPerspective:600}),0),x.add(z,0)}),e.find(".slotslide").each(function(){var e=jQuery(this);z.add(punchgs.TweenLite.from(e,L/1e3,{top:0-l.sloth,rotation:l.rotate,ease:T,force3D:"auto",transformPerspective:600}),0),x.add(z,0)})}if(4==g||5==g){setTimeout(function(){t.find(".defaultimg").css({opacity:0})},100);var S=L/1e3,z=new punchgs.TimelineLite;t.find(".slotslide").each(function(e){var t=jQuery(this),a=e*S/l.slots;5==g&&(a=(l.slots-e-1)*S/l.slots/1.5),z.add(punchgs.TweenLite.to(t,3*S,{transformPerspective:600,force3D:"auto",top:0+l.height,opacity:.5,rotation:l.rotate,ease:j,delay:a}),0),x.add(z,0)}),e.find(".slotslide").each(function(e){var t=jQuery(this),a=e*S/l.slots;5==g&&(a=(l.slots-e-1)*S/l.slots/1.5),z.add(punchgs.TweenLite.from(t,3*S,{top:0-l.height,opacity:.5,rotation:l.rotate,force3D:"auto",ease:punchgs.eo,delay:a}),0),x.add(z,0)})}if(6==g){l.slots<2&&(l.slots=2),l.slots%2&&(l.slots=l.slots+1);z=new punchgs.TimelineLite;setTimeout(function(){t.find(".defaultimg").css({opacity:0})},100),t.find(".slotslide").each(function(e){var t=jQuery(this);if(e+1<l.slots/2)a=90*(e+2);else var a=90*(2+l.slots-e);z.add(punchgs.TweenLite.to(t,(L+a)/1e3,{top:0+l.height,opacity:1,force3D:"auto",rotation:l.rotate,ease:j}),0),x.add(z,0)}),e.find(".slotslide").each(function(e){var t=jQuery(this);if(e+1<l.slots/2)a=90*(e+2);else var a=90*(2+l.slots-e);z.add(punchgs.TweenLite.from(t,(L+a)/1e3,{top:0-l.height,opacity:1,force3D:"auto",rotation:l.rotate,ease:T}),0),x.add(z,0)})}if(7==g){(L*=2)>l.delay&&(L=l.delay);z=new punchgs.TimelineLite;setTimeout(function(){t.find(".defaultimg").css({opacity:0})},100),t.find(".slotslide").each(function(){var e=jQuery(this).find("div");z.add(punchgs.TweenLite.to(e,L/1e3,{left:0-l.slotw/2+"px",top:0-l.height/2+"px",width:2*l.slotw+"px",height:2*l.height+"px",opacity:0,rotation:l.rotate,force3D:"auto",ease:j}),0),x.add(z,0)}),e.find(".slotslide").each(function(e){var t=jQuery(this).find("div");z.add(punchgs.TweenLite.fromTo(t,L/1e3,{left:0,top:0,opacity:0,transformPerspective:600},{left:0-e*l.slotw+"px",ease:T,force3D:"auto",top:"0px",width:l.width,height:l.height,opacity:1,rotation:0,delay:.1}),0),x.add(z,0)})}if(8==g){(L*=3)>l.delay&&(L=l.delay);z=new punchgs.TimelineLite;t.find(".slotslide").each(function(){var e=jQuery(this).find("div");z.add(punchgs.TweenLite.to(e,L/1e3,{left:0-l.width/2+"px",top:0-l.sloth/2+"px",width:2*l.width+"px",height:2*l.sloth+"px",force3D:"auto",ease:j,opacity:0,rotation:l.rotate}),0),x.add(z,0)}),e.find(".slotslide").each(function(t){var a=jQuery(this).find("div");z.add(punchgs.TweenLite.fromTo(a,L/1e3,{left:0,top:0,opacity:0,force3D:"auto"},{left:"0px",top:0-t*l.sloth+"px",width:e.find(".defaultimg").data("neww")+"px",height:e.find(".defaultimg").data("newh")+"px",opacity:1,ease:T,rotation:0}),0),x.add(z,0)})}if(9==g||10==g){B=0;e.find(".slotslide").each(function(e){var t=jQuery(this);B++,x.add(punchgs.TweenLite.fromTo(t,L/1e3,{autoAlpha:0,force3D:"auto",transformPerspective:600},{autoAlpha:1,ease:j,delay:5*e/1e3}),0)})}if(11==g||26==g){var B=0,E=2==v?"#000000":3==v?"#ffffff":"transparent";if(26==g&&(L=0),i)switch(x.add(punchgs.TweenLite.set(e.parent(),{backgroundColor:E,force3D:"auto"}),0),v){case 0:x.add(punchgs.TweenLite.fromTo(t,L/1e3,{autoAlpha:0,zIndex:1},{autoAlpha:1,zIndex:1,force3D:"auto",ease:j}),0),x.add(punchgs.TweenLite.set(e,{autoAlpha:1,force3D:"auto",zIndex:0}),0);break;case 1:x.add(punchgs.TweenLite.fromTo(t,L/1e3,{autoAlpha:0},{autoAlpha:1,force3D:"auto",ease:j}),0),x.add(punchgs.TweenLite.fromTo(e,L/1e3,{autoAlpha:1},{autoAlpha:0,force3D:"auto",ease:j}),0);break;case 2:case 3:case 4:x.add(punchgs.TweenLite.fromTo(e,L/2e3,{autoAlpha:1},{autoAlpha:0,force3D:"auto",ease:j}),0),x.add(punchgs.TweenLite.set(t,{autoAlpha:0,force3D:"auto"}),0),x.add(punchgs.TweenLite.fromTo(t,L/2e3,{autoAlpha:0},{autoAlpha:1,force3D:"auto",ease:j}),L/2e3)}else e.find(".slotslide").each(function(e){var t=jQuery(this);x.add(punchgs.TweenLite.fromTo(t,L/1e3,{autoAlpha:0},{autoAlpha:1,force3D:"auto",ease:j}),0)})}if(27==g||28==g||29==g||30==g){var M=e.find(".slot"),F=27==g||28==g?1:2,P=27==g||29==g?"-100%":"+100%",D=27==g||29==g?"+100%":"-100%",q=27==g||29==g?"-80%":"80%",O=27==g||29==g?"80%":"-80%",N=27==g||29==g?"10%":"-10%",H={overwrite:"all"},V={autoAlpha:0,zIndex:1,force3D:"auto",ease:punchgs.Power1.easeInOut},R={position:"inherit",autoAlpha:0,overwrite:"all"},Y={autoAlpha:1,force3D:"auto",ease:punchgs.Power1.easeOut},X={overwrite:"all",zIndex:2},U={autoAlpha:1,force3D:"auto",overwrite:"all",ease:punchgs.Power1.easeInOut},G={overwrite:"all",zIndex:2},W={autoAlpha:1,force3D:"auto",ease:punchgs.Power1.easeInOut},Z=1==F?"y":"x";H[Z]="0px",V[Z]=P,R[Z]=N,Y[Z]="0%",X[Z]=D,U[Z]=P,G[Z]=q,W[Z]=O,M.append('<span style="background-color:rgba(0,0,0,0.6);width:100%;height:100%;position:absolute;top:0px;left:0px;display:block;z-index:2"></span>'),x.add(punchgs.TweenLite.fromTo(t,L/1e3,H,V),0),x.add(punchgs.TweenLite.fromTo(e.find(".defaultimg"),L/2e3,R,Y),L/2e3),x.add(punchgs.TweenLite.fromTo(M,L/1e3,X,U),0),x.add(punchgs.TweenLite.fromTo(M.find(".slotslide div"),L/1e3,G,W),0)}if(12==g||13==g||14==g||15==g){(L=L)>l.delay&&(L=l.delay),setTimeout(function(){punchgs.TweenLite.set(t.find(".defaultimg"),{autoAlpha:0})},100);var K=l.width,J=l.height,$=e.find(".slotslide"),ee=0,te=0,ae=1,re=1,ie=1,se=L/1e3,oe=se;"fullwidth"!=l.sliderLayout&&"fullscreen"!=l.sliderLayout||(K=$.width(),J=$.height()),12==g?ee=K:15==g?ee=0-K:13==g?te=J:14==g&&(te=0-J),1==v&&(ae=0),2==v&&(ae=0),3==v&&(se=L/1300),4!=v&&5!=v||(re=.6),6==v&&(re=1.4),5!=v&&6!=v||(ie=1.4,ae=0,K=0,J=0,ee=0,te=0),6==v&&(ie=.6);7==v&&(K=0,J=0);var ne=e.find(".slotslide"),le=t.find(".slotslide");if(x.add(punchgs.TweenLite.set(o,{zIndex:15}),0),x.add(punchgs.TweenLite.set(s,{zIndex:20}),0),8==v?(x.add(punchgs.TweenLite.set(o,{zIndex:20}),0),x.add(punchgs.TweenLite.set(s,{zIndex:15}),0),x.add(punchgs.TweenLite.set(ne,{left:0,top:0,scale:1,opacity:1,rotation:0,ease:j,force3D:"auto"}),0)):x.add(punchgs.TweenLite.from(ne,se,{left:ee,top:te,scale:ie,opacity:ae,rotation:l.rotate,ease:j,force3D:"auto"}),0),4!=v&&5!=v||(K=0,J=0),1!=v)switch(g){case 12:x.add(punchgs.TweenLite.to(le,oe,{left:0-K+"px",force3D:"auto",scale:re,opacity:ae,rotation:l.rotate,ease:T}),0);break;case 15:x.add(punchgs.TweenLite.to(le,oe,{left:K+"px",force3D:"auto",scale:re,opacity:ae,rotation:l.rotate,ease:T}),0);break;case 13:x.add(punchgs.TweenLite.to(le,oe,{top:0-J+"px",force3D:"auto",scale:re,opacity:ae,rotation:l.rotate,ease:T}),0);break;case 14:x.add(punchgs.TweenLite.to(le,oe,{top:J+"px",force3D:"auto",scale:re,opacity:ae,rotation:l.rotate,ease:T}),0)}}if(16==g){z=new punchgs.TimelineLite;x.add(punchgs.TweenLite.set(o,{position:"absolute","z-index":20}),0),x.add(punchgs.TweenLite.set(s,{position:"absolute","z-index":15}),0),o.wrapInner('<div class="tp-half-one" style="position:relative; width:100%;height:100%"></div>'),o.find(".tp-half-one").clone(!0).appendTo(o).addClass("tp-half-two"),o.find(".tp-half-two").removeClass("tp-half-one");var K=l.width,J=l.height;"on"==l.autoHeight&&(J=n.height()),o.find(".tp-half-one .defaultimg").wrap('<div class="tp-papercut" style="width:'+K+"px;height:"+J+'px;"></div>'),o.find(".tp-half-two .defaultimg").wrap('<div class="tp-papercut" style="width:'+K+"px;height:"+J+'px;"></div>'),o.find(".tp-half-two .defaultimg").css({position:"absolute",top:"-50%"}),o.find(".tp-half-two .tp-caption").wrapAll('<div style="position:absolute;top:-50%;left:0px;"></div>'),x.add(punchgs.TweenLite.set(o.find(".tp-half-two"),{width:K,height:J,overflow:"hidden",zIndex:15,position:"absolute",top:J/2,left:"0px",transformPerspective:600,transformOrigin:"center bottom"}),0),x.add(punchgs.TweenLite.set(o.find(".tp-half-one"),{width:K,height:J/2,overflow:"visible",zIndex:10,position:"absolute",top:"0px",left:"0px",transformPerspective:600,transformOrigin:"center top"}),0);o.find(".defaultimg");var de=Math.round(20*Math.random()-10),ue=Math.round(20*Math.random()-10),ce=Math.round(20*Math.random()-10),me=.4*Math.random()-.2,pe=.4*Math.random()-.2,fe=1*Math.random()+1,ye=1*Math.random()+1,he=.3*Math.random()+.3;x.add(punchgs.TweenLite.set(o.find(".tp-half-one"),{overflow:"hidden"}),0),x.add(punchgs.TweenLite.fromTo(o.find(".tp-half-one"),L/800,{width:K,height:J/2,position:"absolute",top:"0px",left:"0px",force3D:"auto",transformOrigin:"center top"},{scale:fe,rotation:de,y:0-J-J/4,autoAlpha:0,ease:j}),0),x.add(punchgs.TweenLite.fromTo(o.find(".tp-half-two"),L/800,{width:K,height:J,overflow:"hidden",position:"absolute",top:J/2,left:"0px",force3D:"auto",transformOrigin:"center bottom"},{scale:ye,rotation:ue,y:J+J/4,ease:j,autoAlpha:0,onComplete:function(){punchgs.TweenLite.set(o,{position:"absolute","z-index":15}),punchgs.TweenLite.set(s,{position:"absolute","z-index":20}),o.find(".tp-half-one").length>0&&(o.find(".tp-half-one .defaultimg").unwrap(),o.find(".tp-half-one .slotholder").unwrap()),o.find(".tp-half-two").remove()}}),0),z.add(punchgs.TweenLite.set(e.find(".defaultimg"),{autoAlpha:1}),0),null!=o.html()&&x.add(punchgs.TweenLite.fromTo(s,(L-200)/1e3,{scale:he,x:l.width/4*me,y:J/4*pe,rotation:ce,force3D:"auto",transformOrigin:"center center",ease:T},{autoAlpha:1,scale:1,x:0,y:0,rotation:0}),0),x.add(z,0)}if(17==g&&e.find(".slotslide").each(function(e){var t=jQuery(this);x.add(punchgs.TweenLite.fromTo(t,L/800,{opacity:0,rotationY:0,scale:.9,rotationX:-110,force3D:"auto",transformPerspective:600,transformOrigin:"center center"},{opacity:1,top:0,left:0,scale:1,rotation:0,rotationX:0,force3D:"auto",rotationY:0,ease:j,delay:.06*e}),0)}),18==g&&e.find(".slotslide").each(function(e){var t=jQuery(this);x.add(punchgs.TweenLite.fromTo(t,L/500,{autoAlpha:0,rotationY:110,scale:.9,rotationX:10,force3D:"auto",transformPerspective:600,transformOrigin:"center center"},{autoAlpha:1,top:0,left:0,scale:1,rotation:0,rotationX:0,force3D:"auto",rotationY:0,ease:j,delay:.06*e}),0)}),19==g||22==g){z=new punchgs.TimelineLite;x.add(punchgs.TweenLite.set(o,{zIndex:20}),0),x.add(punchgs.TweenLite.set(s,{zIndex:20}),0),setTimeout(function(){t.find(".defaultimg").css({opacity:0})},100);var ge=90,ae=1,ve="center center ";ge=-90,19==g?(ve=ve+"-"+l.height/2,ae=0):ve+=l.height/2,punchgs.TweenLite.set(n,{transformStyle:"flat",backfaceVisibility:"hidden",transformPerspective:600}),e.find(".slotslide").each(function(e){var t=jQuery(this);z.add(punchgs.TweenLite.fromTo(t,L/1e3,{transformStyle:"flat",backfaceVisibility:"hidden",left:0,rotationY:l.rotate,z:10,top:0,scale:1,force3D:"auto",transformPerspective:600,transformOrigin:ve,rotationX:ge},{left:0,rotationY:0,top:0,z:0,scale:1,force3D:"auto",rotationX:0,delay:50*e/1e3,ease:j}),0),z.add(punchgs.TweenLite.to(t,.1,{autoAlpha:1,delay:50*e/1e3}),0),x.add(z)}),t.find(".slotslide").each(function(e){var t=jQuery(this),a=-90;a=90,z.add(punchgs.TweenLite.fromTo(t,L/1e3,{transformStyle:"flat",backfaceVisibility:"hidden",autoAlpha:1,rotationY:0,top:0,z:0,scale:1,force3D:"auto",transformPerspective:600,transformOrigin:ve,rotationX:0},{autoAlpha:1,rotationY:l.rotate,top:0,z:10,scale:1,rotationX:a,delay:50*e/1e3,force3D:"auto",ease:T}),0),x.add(z)}),x.add(punchgs.TweenLite.set(o,{zIndex:18}),0)}if(20==g){setTimeout(function(){t.find(".defaultimg").css({opacity:0})},100);var _e=-l.width,ge=80,ve="20% 70% -"+l.height/2;e.find(".slotslide").each(function(e){var t=jQuery(this),a=50*e/1e3;x.add(punchgs.TweenLite.fromTo(t,L/1e3,{left:_e,rotationX:40,z:-600,opacity:ae,top:0,scale:1,force3D:"auto",transformPerspective:600,transformOrigin:ve,transformStyle:"flat",rotationY:ge},{left:0,rotationX:0,opacity:1,top:0,z:0,scale:1,rotationY:0,delay:a,ease:j}),0)}),t.find(".slotslide").each(function(e){var t=jQuery(this),a=50*e/1e3;a=e>0?a+L/9e3:0;var r=l.width/2,i=-30,s="80% 70% -"+l.height/2;T=punchgs.Power2.easeInOut,x.add(punchgs.TweenLite.fromTo(t,L/1e3,{opacity:1,rotationX:0,top:0,z:0,scale:1,left:0,force3D:"auto",transformPerspective:600,transformOrigin:s,transformStyle:"flat",rotationY:0},{opacity:1,rotationX:20,top:0,z:-600,left:r,force3D:"auto",rotationY:i,delay:a,ease:T}),0)})}if(21==g||25==g){setTimeout(function(){t.find(".defaultimg").css({opacity:0})},100);var ge=90,_e=-l.width,be=-ge;if(25==g){ve="center top 0";ge=l.rotate}else{ve="left center 0";be=l.rotate}e.find(".slotslide").each(function(e){var t=jQuery(this),a=L/1.5/3;x.add(punchgs.TweenLite.fromTo(t,2*a/1e3,{left:0,transformStyle:"flat",rotationX:be,z:0,autoAlpha:0,top:0,scale:1,force3D:"auto",transformPerspective:1200,transformOrigin:ve,rotationY:ge},{left:0,rotationX:0,top:0,z:0,autoAlpha:1,scale:1,rotationY:0,force3D:"auto",delay:a/1e3,ease:j}),0)}),_e=l.width,ge=-90,25==g?(ve="center bottom 0",be=-ge,ge=l.rotate):(ve="right center 0",be=l.rotate),t.find(".slotslide").each(function(e){var t=jQuery(this);x.add(punchgs.TweenLite.fromTo(t,L/1e3,{left:0,transformStyle:"flat",rotationX:0,z:0,autoAlpha:1,top:0,scale:1,force3D:"auto",transformPerspective:1200,transformOrigin:ve,rotationY:0},{left:0,rotationX:be,top:0,z:0,autoAlpha:1,force3D:"auto",scale:1,rotationY:ge,ease:T}),0)})}if(23==g||24==g){setTimeout(function(){t.find(".defaultimg").css({opacity:0})},100);var ge=-90,ae=1;if(ge=90,23==g){ve="center center -"+l.width/2;ae=0}else ve="center center "+l.width/2;punchgs.TweenLite.set(n,{transformStyle:"preserve-3d",backfaceVisibility:"hidden",perspective:2500}),e.find(".slotslide").each(function(e){var t=jQuery(this);x.add(punchgs.TweenLite.fromTo(t,L/1e3,{left:0,rotationX:l.rotate,force3D:"auto",opacity:ae,top:0,scale:1,transformPerspective:1200,transformOrigin:ve,rotationY:ge},{left:0,rotationX:0,autoAlpha:1,top:0,z:0,scale:1,rotationY:0,delay:50*e/500,ease:j}),0)}),ge=90,ge=-90,t.find(".slotslide").each(function(e){var t=jQuery(this);x.add(punchgs.TweenLite.fromTo(t,L/1e3,{left:0,rotationX:0,top:0,z:0,scale:1,force3D:"auto",transformStyle:"flat",transformPerspective:1200,transformOrigin:ve,rotationY:0},{left:0,rotationX:l.rotate,top:0,scale:1,rotationY:ge,delay:50*e/500,ease:T}),0),23==g&&x.add(punchgs.TweenLite.fromTo(t,L/2e3,{autoAlpha:1},{autoAlpha:0,delay:50*e/500+L/3e3,ease:T}),0)})}if(x.add(punchgs.TweenLite.set(e.find(".defaultimg"),{autoAlpha:1})),x.add(punchgs.TweenLite.set(e.find(".slot"),{autoAlpha:0})),x.seek(1e5),void 0!=r)return x;jQuery("#divbgholder").data("slidetimeline",x)},removeAllSlots=function(){void 0!=jQuery("#divbgholder").data("slidetimeline")&&(jQuery("#divbgholder").data("slidetimeline").kill(),jQuery("#divbgholder").find(".slot").each(function(){jQuery(this).remove()}))};t.resetSlideAnimations=function(e){removeAllSlots(),slideAnimation();var t=jQuery("#divbgholder").data("slidetimeline"),a=jQuery("#mastertimer-position").position().left/100;void 0!=t&&(t.stop(),e&&t.seek(a))}};